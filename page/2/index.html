<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>AndrewMoa的知识分享</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="AndrewMoa的知识分享">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="AndrewMoa的知识分享">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Andrew Moa">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="AndrewMoa的知识分享" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css">

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">AndrewMoa的知识分享</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS 订阅"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="搜索"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-Ansa/Abaqus提交命令" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/03/26/Ansa/Abaqus%E6%8F%90%E4%BA%A4%E5%91%BD%E4%BB%A4/" class="article-date">
  <time class="dt-published" datetime="2025-03-25T17:27:19.225Z" itemprop="datePublished">2025-03-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/03/26/Ansa/Abaqus%E6%8F%90%E4%BA%A4%E5%91%BD%E4%BB%A4/">Abaqus命令行提交</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>06&#x2F;03&#x2F;2025</p>
<hr>
<p>用Ansa输出inp文件之后，可以通过Abaqus CAE窗口界面提交inp文件进行计算，也可以通过命令行方式提交计算。使用命令行提交需要添加Path，Windows下通常是<code>[Abaqus安装目录]\Commands</code>路径。</p>
<p>其实Windows下装完Abaqus后，开始菜单会出现<code>Abaqus Command</code>快捷方式，点击该快捷方式可以通过命令行提交abaqus计算文件，不需要添加Path。<br><img src="/../../images/a6ed3616d120e0eeb3087d0596b3cb2b.png" alt="a6ed3616d120e0eeb3087d0596b3cb2b.png"></p>
<p>使用以下命令行提交inp计算文件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">abaqus job=[文件名]  cpus=[核心数] double=both output_precision=full int ask=off</span><br></pre></td></tr></table></figure>
<p><img src="/../../images/c410e740fc2aa52bde5adab8a2d1d217.png" alt="c410e740fc2aa52bde5adab8a2d1d217.png"></p>
<p>通常来说通过<code>job</code>指定文件名就可以开始计算了，其他一些命令开关不是必要选项，它们的含义如下：</p>
<ul>
<li><code>help</code> →查看帮助</li>
<li><code>double=&#123; explicit | both | off | constraint &#125;</code> → 计算精度</li>
<li><code>output_precision=&#123; single | full &#125;</code> → 输出结果精度</li>
<li><code>int / interactive</code> → 打印求解过程</li>
<li><code>ask=off</code> → 不询问直接覆盖</li>
<li><code>memory=5gb</code> → 指定最大运行内存5GB</li>
<li><code>scratch=D:\Temp</code> → 指定计算临时文件存储地</li>
</ul>
<p>更多命令参考：<a target="_blank" rel="noopener" href="https://abaqus-docs.mit.edu/2017/English/SIMACAEEXCRefMap/simaexc-c-analysisproc.htm">https://abaqus-docs.mit.edu/2017/English/SIMACAEEXCRefMap/simaexc-c-analysisproc.htm</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/03/26/Ansa/Abaqus%E6%8F%90%E4%BA%A4%E5%91%BD%E4%BB%A4/" data-id="cm8orjgqc0001pw0949x6ftn9" data-title="Abaqus命令行提交" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Ansa/Ansa单位制" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/03/26/Ansa/Ansa%E5%8D%95%E4%BD%8D%E5%88%B6/" class="article-date">
  <time class="dt-published" datetime="2025-03-25T17:27:19.222Z" itemprop="datePublished">2025-03-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/03/26/Ansa/Ansa%E5%8D%95%E4%BD%8D%E5%88%B6/">Ansa单位制</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>03&#x2F;03&#x2F;2025</p>
<hr>
<p>Ansa导入step模型默认长度单位是mm，重量是ton。但我们常用的SI单位制长度是m，重量是kg。<br>关于两种单位的转换如下表所示。</p>
<table>
<thead>
<tr>
<th>LENGTH</th>
<th>MASS</th>
<th>TIME</th>
<th>FORCE</th>
<th>STRESS</th>
<th>ENERGY</th>
<th>DENSITY</th>
<th>YOUNG’s MUDULUS</th>
<th>Velocity (56.3KPH)</th>
<th>GRAVITY</th>
</tr>
</thead>
<tbody><tr>
<td>m</td>
<td>kg</td>
<td>s</td>
<td>N</td>
<td>Pa</td>
<td>Joule</td>
<td>7.83E+03</td>
<td>2.07E+11</td>
<td>15.64</td>
<td>9.81</td>
</tr>
<tr>
<td>mm</td>
<td>ton</td>
<td>s</td>
<td>N</td>
<td>MPa</td>
<td>N-mm</td>
<td>7.83E-09</td>
<td>2.07E+05</td>
<td>1.564E+04</td>
<td>9.81E+03</td>
</tr>
</tbody></table>
<p>在定义模型参数时，应注意根据长度选择对应的单位制。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/03/26/Ansa/Ansa%E5%8D%95%E4%BD%8D%E5%88%B6/" data-id="cm8orjgqe0003pw0959pmbshm" data-title="Ansa单位制" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Ansa/Ansa快速设置连接" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/03/26/Ansa/Ansa%E5%BF%AB%E9%80%9F%E8%AE%BE%E7%BD%AE%E8%BF%9E%E6%8E%A5/" class="article-date">
  <time class="dt-published" datetime="2025-03-25T17:27:19.220Z" itemprop="datePublished">2025-03-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/03/26/Ansa/Ansa%E5%BF%AB%E9%80%9F%E8%AE%BE%E7%BD%AE%E8%BF%9E%E6%8E%A5/">Ansa快速设置连接</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>05&#x2F;03&#x2F;2025</p>
<hr>
<p>Ansa可以通过Connection功能快速设置连接<br>这里以螺接为例，首先将所有螺钉单独显示出来。<br>使用<code>TOPO</code>→<code>Curves</code>→<code>Tubes2Curve</code>将螺接钉几何转换成曲线。<br><img src="/../../images/cf8ec5657b55d755b53386ae1b4272be.png" alt="cf8ec5657b55d755b53386ae1b4272be.png"></p>
<p>保留曲线，将螺接钉几何曲面全删掉。<br><img src="/../../images/0b4b65d233db1e00fd74584da04b96d7.png" alt="0b4b65d233db1e00fd74584da04b96d7.png"></p>
<p>再使用Topo→Points→Edges将曲线转换成3D点，删除掉曲线。<br><img src="/../../images/dc9424dd60a768365c03f1153fc031f5.png" alt="dc9424dd60a768365c03f1153fc031f5.png"><br><img src="/../../images/1ebe0dfd2e017056e6564ad06ba1e3f5.png" alt="1ebe0dfd2e017056e6564ad06ba1e3f5.png"></p>
<p>根据3D点生成螺钉连接点，框选上一步生成的3D点。除了根据曲线定义连接点意外，还可以根据点和面生成连接点。但不同的几何形式对应不同的连接类型，应注意根据需要的连接类型选择对应的几何。这里列出一些常用的连接类型和几何对应关系：</p>
<ul>
<li>3D点：螺接、铆接、焊点</li>
<li>线段：粘胶、焊缝、包边、螺接(直线段)</li>
<li>面：粘胶</li>
</ul>
<p>螺钉连接点可以根据3D点或直线段生成，这里选择用3D点生成。<br><img src="/../../images/4331a76dc0794af78759754fbb601025.png" alt="4331a76dc0794af78759754fbb601025.png"></p>
<p>在模型树中可以看到生成的连接类型为螺钉。<br><img src="/../../images/c791ca537a4743fa0d63ee7987037fa1.png" alt="c791ca537a4743fa0d63ee7987037fa1.png"></p>
<p>将所有的螺钉连接点都扔到一个Part里，Part显示为连接类型。<br><img src="/../../images/8af2a1ab4dad7113ad593f1f58a12f58.png" alt="8af2a1ab4dad7113ad593f1f58a12f58.png"></p>
<p>选择连接管理器Connection Manager，框选要定义的连接点然后鼠标中键，进入连接定义对话框<br><img src="/../../images/53e86de73bce9bcf48d5f9a94e78ce03.png" alt="53e86de73bce9bcf48d5f9a94e78ce03.png"></p>
<p>连接方式选择<code>BOLT</code>，搜索距离根据几何尺寸填写。框选部分选择需要连接的PID，双击进入编辑然后输入英文半角符号<code>?</code>可以打开选择对话框，最多支持4个PID连接。这里ANSA默认连接方式是按Part搜索，需要手动改成PID。补充螺钉半径和其他连接信息，按<code>Realize</code>生成连接。<br><img src="/../../images/452ade2ba664f49f46e72dfb029f11a1.png" alt="452ade2ba664f49f46e72dfb029f11a1.png"></p>
<p>BEAM需要设置材料和截面尺寸，在弹出的PID对话框中设置。<br><img src="/../../images/241c9eaa6309725edb610cafc31f4daf.png" alt="241c9eaa6309725edb610cafc31f4daf.png"></p>
<p>连接效果如下。<br><img src="/../../images/32339600fef4ea6b7c7078c6a0d19fd3.png" alt="32339600fef4ea6b7c7078c6a0d19fd3.png"></p>
<p>PS：如果是SHELL网格，可以通过上面的3D点生成的螺钉连接点的方式生成螺接网格（如上图）。但如果是实体网格的话，就必须要通过直线段生成的螺钉连接点连接螺钉孔，生成带方向的连接点，连接类型还必须选择<code>BOLT ON SOLID</code>。<br><img src="/../../images/91f23d42ef3b6bef725cff838c7bb392.png" alt="91f23d42ef3b6bef725cff838c7bb392.png"><br><img src="/../../images/e5ad09f455baef060628b84040161fb8.png" alt="e5ad09f455baef060628b84040161fb8.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/03/26/Ansa/Ansa%E5%BF%AB%E9%80%9F%E8%AE%BE%E7%BD%AE%E8%BF%9E%E6%8E%A5/" data-id="cm8orjgqd0002pw09g4mlax04" data-title="Ansa快速设置连接" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Ansa/Ansa抽中面功能" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/03/26/Ansa/Ansa%E6%8A%BD%E4%B8%AD%E9%9D%A2%E5%8A%9F%E8%83%BD/" class="article-date">
  <time class="dt-published" datetime="2025-03-25T17:27:19.216Z" itemprop="datePublished">2025-03-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/03/26/Ansa/Ansa%E6%8A%BD%E4%B8%AD%E9%9D%A2%E5%8A%9F%E8%83%BD/">Ansa抽中面功能</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>27&#x2F;02&#x2F;2025</p>
<hr>
<p>ANSA针对钣金件抽中面有几种不同处理方式</p>
<h2 id="1-Skin方法"><a href="#1-Skin方法" class="headerlink" title="1. Skin方法"></a>1. <code>Skin</code>方法</h2><p><code>TOPO</code>→<code>Mid.Surfa.</code>→<code>Skin</code>，选中整个几何体然后无脑按鼠标中键就可以自动抽中面。<br><img src="/../../images/0f525cbbea14aa2904b78e9e80f86f98.png" alt="0f525cbbea14aa2904b78e9e80f86f98.png"></p>
<p>适合一些厚度比较均匀的钣金结构件，没有筋条、凸台、凹坑等特征。<br><img src="/../../images/86e9dc3696bc04b9a2811e5e191d2ae8.png" alt="86e9dc3696bc04b9a2811e5e191d2ae8.png"></p>
<p>抽出来的中面是几何不带网格，需要手动画网格，会自动删除原来的几何并添加厚度。<br><img src="/../../images/65641a61f8dc0512e7817886b49376ac.png" alt="65641a61f8dc0512e7817886b49376ac.png"></p>
<p>对一些挤压件像挤压铝型材也支持，但是有圆角的话要先处理掉，不然抽出来的中面圆角会保留并放大。<br><img src="/../../images/943f3baab965a035e5eb414649bfc120.png" alt="943f3baab965a035e5eb414649bfc120.png"><br><img src="/../../images/68c5c4d9c15d8b0aa5963fcc69b65e0a.png" alt="68c5c4d9c15d8b0aa5963fcc69b65e0a.png"></p>
<h2 id="2-Casting-Extrusion方法"><a href="#2-Casting-Extrusion方法" class="headerlink" title="2. Casting/Extrusion方法"></a>2. <code>Casting/Extrusion</code>方法</h2><p>还有一种针对铸造和挤压件的抽中面方法，<code>TOPO</code>→<code>Mid.Surfa.</code>→<code>Casting/Extrusion</code><br><img src="/../../images/ca523b08317e499e8d5b541abc272c63.png" alt="ca523b08317e499e8d5b541abc272c63.png"></p>
<p>首先要确保几何是封闭的，没有错误面和边。<br><img src="/../../images/04aff45feacbd435a025c1fa4d939939.png" alt="04aff45feacbd435a025c1fa4d939939.png"></p>
<p>在弹出选项卡选好要抽中面的零部件是铸造件还是挤压件，定义好最小厚度和面网格尺寸。抽中面之前最好先在网格参数中定义好特征孔参数，用于生成washer网格，因为抽完面之后就直接是面网格。<br><img src="/../../images/41aca4cbf0e00ad69276c8e89041a513.png" alt="41aca4cbf0e00ad69276c8e89041a513.png"></p>
<p>最后生成的网格，厚度根据几何形状自动计算，不需要在PID里再设置厚度。<br><img src="/../../images/bd6e4eb9c3a4f72253bdd1c10eb452ad.png" alt="bd6e4eb9c3a4f72253bdd1c10eb452ad.png"></p>
<h2 id="3-Middle-Multi-手工处理"><a href="#3-Middle-Multi-手工处理" class="headerlink" title="3. Middle Multi.手工处理"></a>3. <code>Middle Multi.</code>手工处理</h2><p>很麻烦，不推荐。但是对于一些复杂结构件，比如注塑件等，只能用这种办法。<br><img src="/../../images/410117bbbf085e19ff33ed0193e0f28f.png" alt="410117bbbf085e19ff33ed0193e0f28f.png"></p>
<p>首先要把一些和筋条等特征共面的曲面按拓扑分割，方便后面处理。<br><img src="/../../images/33a2206ca7f19d97f0358ba9472d2cbd.png" alt="33a2206ca7f19d97f0358ba9472d2cbd.png"></p>
<p>用红色和绿色标注中面的正反面，蓝色是侧面。<br><img src="/../../images/7469baf9dcb520788aa5d1389b4f0f99.png" alt="7469baf9dcb520788aa5d1389b4f0f99.png"></p>
<p>抽完的中面会自动隐藏，方便处理剩下的模型。<br><img src="/../../images/652f8d7c29cef890403edda839b163f1.png" alt="652f8d7c29cef890403edda839b163f1.png"></p>
<h2 id="4-总结"><a href="#4-总结" class="headerlink" title="4. 总结"></a>4. 总结</h2><ul>
<li><code>Skin</code>方法：简单，适合钣金件，生成几何数据，精度好</li>
<li><code>Casting/Extrusion</code>方法：简单，适合铸造和挤压件，生成网格数据，精度稍差</li>
<li><code>Middle Multi.</code>手工处理：繁琐，但适合复杂结构件如注塑件等，生成几何数据，精度因人而异</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/03/26/Ansa/Ansa%E6%8A%BD%E4%B8%AD%E9%9D%A2%E5%8A%9F%E8%83%BD/" data-id="cm8orjgqe0004pw090lheebk9" data-title="Ansa抽中面功能" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Ansa/Ansa螺钉孔washer网格" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/03/26/Ansa/Ansa%E8%9E%BA%E9%92%89%E5%AD%94washer%E7%BD%91%E6%A0%BC/" class="article-date">
  <time class="dt-published" datetime="2025-03-25T17:27:19.213Z" itemprop="datePublished">2025-03-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/03/26/Ansa/Ansa%E8%9E%BA%E9%92%89%E5%AD%94washer%E7%BD%91%E6%A0%BC/">Ansa螺钉孔washer网格</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>28&#x2F;02&#x2F;2025 </p>
<hr>
<p>使用Ansa建面网格的时候我们都希望螺钉孔能处理成washer网格的形式，方便后面加约束。<br><img src="/../../images/ff86c5fd4ac5cc0624c9013d21a1dab5.png" alt="ff86c5fd4ac5cc0624c9013d21a1dab5.png"></p>
<p>但默认设置生成的网格螺钉孔貌似都没有按washer处理。<br><img src="/../../images/6ea45853b136275e0c8325e7b4a47341.png" alt="6ea45853b136275e0c8325e7b4a47341.png"></p>
<p>有几种方法，其一是通过几何处理手动添加<code>Zone Cut</code>的方式，这种方法手工处理工作量太大，不推荐</p>
<p>另一种方法需要手动<code>Reconstruct</code>网格，首先在网格参数设置里设置孔的特征参数。<br><img src="/../../images/363c5b51b1b6eab2ba3b44bd907c10dd.png" alt="363c5b51b1b6eab2ba3b44bd907c10dd.png"><br><img src="/../../images/6db3f7dddb8aaa1cea878f831db1abc0.png" alt="6db3f7dddb8aaa1cea878f831db1abc0.png"></p>
<p>返回<code>Mesh</code>里，<code>Reconstrust</code>就有了。<br><img src="/../../images/5489ac8734b83c3b95fbac196237c402.png" alt="5489ac8734b83c3b95fbac196237c402.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/03/26/Ansa/Ansa%E8%9E%BA%E9%92%89%E5%AD%94washer%E7%BD%91%E6%A0%BC/" data-id="cm8orjgqf0006pw09bxkocwef" data-title="Ansa螺钉孔washer网格" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Ansa/Ansa网格质量设置" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/03/26/Ansa/Ansa%E7%BD%91%E6%A0%BC%E8%B4%A8%E9%87%8F%E8%AE%BE%E7%BD%AE/" class="article-date">
  <time class="dt-published" datetime="2025-03-25T17:27:19.209Z" itemprop="datePublished">2025-03-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/03/26/Ansa/Ansa%E7%BD%91%E6%A0%BC%E8%B4%A8%E9%87%8F%E8%AE%BE%E7%BD%AE/">Ansa网格质量设置</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>27&#x2F;02&#x2F;2025</p>
<hr>
<p>快捷键F11，或者下面这个按钮，定义Ansa网格质量<br><img src="/../../images/0cbaef5ad11449b3f2baffeb6cfbaa24.png" alt="0cbaef5ad11449b3f2baffeb6cfbaa24.png"></p>
<p>面网格质量（Abaqus）<br><img src="/../../images/8dba04bca8c14b3a47e4ed87d938ac49.png" alt="8dba04bca8c14b3a47e4ed87d938ac49.png"></p>
<p>体网格质量（Abaqus）<br><img src="/../../images/1b8e7d21f062ee6d961c4975a0dedffd.png" alt="1b8e7d21f062ee6d961c4975a0dedffd.png"></p>
<p>最好把配置文件另存为到本地，下次重新打开配置文件覆盖即可。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/03/26/Ansa/Ansa%E7%BD%91%E6%A0%BC%E8%B4%A8%E9%87%8F%E8%AE%BE%E7%BD%AE/" data-id="cm8orjgqf0005pw094mjd6msu" data-title="Ansa网格质量设置" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-知乎旧文章/超算平台部署STAR-CCM+" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/03/26/%E7%9F%A5%E4%B9%8E%E6%97%A7%E6%96%87%E7%AB%A0/%E8%B6%85%E7%AE%97%E5%B9%B3%E5%8F%B0%E9%83%A8%E7%BD%B2STAR-CCM+/" class="article-date">
  <time class="dt-published" datetime="2025-03-25T17:27:14.457Z" itemprop="datePublished">2025-03-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/03/26/%E7%9F%A5%E4%B9%8E%E6%97%A7%E6%96%87%E7%AB%A0/%E8%B6%85%E7%AE%97%E5%B9%B3%E5%8F%B0%E9%83%A8%E7%BD%B2STAR-CCM+/">超算平台部署STAR-CCM+</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>04&#x2F;08&#x2F;2022</p>
<hr>
<p>[TOC]</p>
<hr>
<p>最近提供超算试用的平台挺多的，很多平台都有免费试用的申请。因工作需要申请了某超算平台的账号并进行了相关的试用，就超算平台部署STAR-CCM+软件及应用的过程做一个简单的记录，也为后续相关应用提供参考。</p>
<h2 id="1-超算平台信息"><a href="#1-超算平台信息" class="headerlink" title="1. 超算平台信息"></a>1. 超算平台信息</h2><p>远程登陆超算可以通过SSH连接，某些平台还提供的webSSH、webVNC连接，支持通过浏览器连接命令行或图形界面。具体登陆方式请参考平台提供的相关文档。</p>
<p>首次登陆安装部署软件之前应当先了解超算平台的配置，确定平台是否支持需要安装的软件。通过以下命令了解超算平台的发行版信息。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsb_release -a</span><br></pre></td></tr></table></figure>

<p>可以了解到该平台发行版为CentOS，版本7.9.2009。</p>
<p><img src="/../../images/01-%E5%8F%91%E8%A1%8C%E7%89%88%E4%BF%A1%E6%81%AF.png" alt="01-发行版信息.png"></p>
<p>该超算平台所用并行作业调度系统为开源的Slurm，可以通过以下命令查看可供调用的计算资源。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sinfo -a</span><br></pre></td></tr></table></figure>

<p>输出比较长，这里只截了一部分。下图中<code>amd_256</code>表示计算节点所在分区，记住它，后面编写脚本会用到。</p>
<p><img src="/../../images/02-%E8%AE%A1%E7%AE%97%E8%8A%82%E7%82%B9%E4%BF%A1%E6%81%AF.png" alt="02-计算节点信息.png"></p>
<h2 id="2-软件安装"><a href="#2-软件安装" class="headerlink" title="2. 软件安装"></a>2. 软件安装</h2><p>软件上传及存储请参考平台提供的相关文档。</p>
<p>本文安装的是16.06.010双精度Linux版本。通过以下命令解压<code>tar.gz</code>安装包。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar xvzf [file-name].tar.gz</span><br></pre></td></tr></table></figure>

<p>安装文件被解压到<code>starccm+_16.06.010</code>目录中，进入该目录运行<code>.sh</code>文件开始安装。注意，此处不需要root用户权限（多数情况下平台是不会提供root账号的，但不影响软件安装）。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./STAR-CCM+16.06.010_01_linux-x86_64-2.17_gnu9.2-r8.sh</span><br></pre></td></tr></table></figure>

<p>用VNC连接的可以通过图形界面安装，不想通过图形界面安装可以用以下命令强制通过控制台安装。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./STAR-CCM+16.06.010_01_linux-x86_64-2.17_gnu9.2-r8.sh -i console</span><br></pre></td></tr></table></figure>

<p>本文采用控制台方式进行安装。首先提示LICENSE，如下图所示，按<code>ENTER</code>继续。</p>
<p><img src="/../../images/03-LICENSE%E6%8F%90%E7%A4%BA.png" alt="03-LICENSE提示.png"></p>
<p>是否接受用户协议，输入<code>Y</code>，<code>ENTER</code>确认继续。</p>
<p><img src="/../../images/04-LICENSE%E7%A1%AE%E8%AE%A4.png" alt="04-LICENSE确认.png"></p>
<p>用户体验计划，根据自己需要选择是否接受(Y&#x2F;N)，不影响后续使用。</p>
<p><img src="/../../images/05-%E7%94%A8%E6%88%B7%E4%BD%93%E9%AA%8C%E8%AE%A1%E5%88%92.png" alt="05-用户体验计划.png"></p>
<p>安装位置，本文选择安装在<code>$&#123;HOME&#125;/opt/Siemens</code>目录下，按提示输入绝对路径，<code>Y</code>确认。</p>
<p><img src="/../../images/06-%E8%BE%93%E5%85%A5%E5%AE%89%E8%A3%85%E4%BD%8D%E7%BD%AE.png" alt="06-输入安装位置.png"></p>
<p>安装信息，<code>ENTER</code>确认，开始复制文件。</p>
<p><img src="/../../images/07-%E5%AE%89%E8%A3%85%E4%BF%A1%E6%81%AF.png" alt="07-安装信息.png"></p>
<p>安装完成，<code>ENTER</code>确认退出。记住安装路径：</p>
<p><code>$&#123;HOME&#125;/opt/Siemens/16.06.010-R8/STAR-CCM+16.06.010-R8</code></p>
<p><img src="/../../images/08-%E5%AE%89%E8%A3%85%E5%AE%8C%E6%88%90%E7%A1%AE%E8%AE%A4.png" alt="08-安装完成确认.png"></p>
<p>和谐过程就免了，自行参考文档吧。支持正版，打击盗版。</p>
<h2 id="3-编制SLURM脚本"><a href="#3-编制SLURM脚本" class="headerlink" title="3. 编制SLURM脚本"></a>3. 编制SLURM脚本</h2><p>下面编写SLURM脚本，提交算例简单测试一下。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash </span></span><br><span class="line"></span><br><span class="line"><span class="comment">#SBATCH --job-name=carbin_tcm </span></span><br><span class="line"><span class="comment">#SBATCH --partition=amd_256 </span></span><br><span class="line"><span class="comment">#SBATCH --output=%j.out </span></span><br><span class="line"><span class="comment">#SBATCH --error=%j.err </span></span><br><span class="line"><span class="comment">#SBATCH -N 2 </span></span><br><span class="line"><span class="comment">#SBATCH --ntasks-per-node=64 </span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> MPI_TYPE=openmpi <span class="comment"># intel platform openmpi </span></span><br><span class="line"><span class="built_in">export</span> DIR=/***/home/***/opt/Siemens/16.06.010-R8/STAR-CCM+16.06.010-R8/star/bin </span><br><span class="line"><span class="built_in">export</span> CDLMD_LICENSE_FILE=/***/home/***/opt/Siemens/license.dat </span><br><span class="line"><span class="built_in">export</span> SIM_FILE=carbin_tcm.sim </span><br><span class="line"><span class="comment">#export JAVA_FILE=carbin_tcm.java </span></span><br><span class="line"><span class="built_in">export</span> MACHINEFILE=<span class="variable">$SLURM_JOBID</span>.node </span><br><span class="line">scontrol show hostnames <span class="variable">$SLURM_JOB_NODELIST</span> &gt; <span class="variable">$MACHINEFILE</span> </span><br><span class="line"><span class="variable">$DIR</span>/starccm+ <span class="variable">$SIM_FILE</span> -batch <span class="variable">$JAVA_FILE</span> -np <span class="variable">$SLURM_NPROCS</span> -machinefile <span class="variable">$MACHINEFILE</span> -mpi <span class="variable">$MPI_TYPE</span> -rsh ssh -power </span><br></pre></td></tr></table></figure>

<p><code>--job-name</code>指定的的是案例的名称，可以在<code>squeue</code>命令中显示的名称。</p>
<p><code>--partition</code>指定的是计算节点所在分区，这里调用的是<code>amd_256</code>分区中的计算节点。</p>
<p><code>--output</code>指定输出文件名称，<code>%j</code>或<code>$SLURM_JOBID</code>表示当前作业ID，由平台自行指定。</p>
<p><code>--error</code>指定输出错误文件名称。</p>
<p><code>-N</code>指定该案例调用的节点数，这里调用2个计算节点。</p>
<p><code>--ntasks-per-node</code>指定每节点进程数，这里指定每节点调用64线程。</p>
<p>变量<code>$SLURM_NPROCS</code>表示总的计算进程数，可以根据以上两个参数自动计算，总的计算进程为128。</p>
<p>参数<code>MPI_TYPE</code>指定调用mpi类型，推荐用<code>intel</code>或<code>openmpi</code>，<code>platform</code>高版本不再支持。</p>
<p>参数<code>DIR</code>指定STAR-CCM+安装路径，就是<code>starccm</code>+文件所在的路径。</p>
<p>参数<code>CDLMD_LICENSE_FILE</code>指定LICENSE的访问路径，可以是<strong>文件路径</strong>也可以是<strong>端口号@主机地址</strong>。</p>
<p>参数<code>SIM_FILE</code>指定测试案例文件名。</p>
<p>参数<code>JAVA_FILE</code>指定宏文件名。如果使用了宏，可以把这一行的注释去掉，把文件名改成调用的宏文件名即可。</p>
<p>参数<code>MACHINEFILE</code>指定节点文件。</p>
<p>命令<code>scontrol show hostnames SLURM_JOB_NODELIST &gt; MACHINEFILE</code>用于输出主机名到节点文件。</p>
<p>保存算例脚本文件为<code>carbin_tcm.slurm</code>，测试案例文件为<code>carbin_tcm.sim</code>，一共2个文件，上传。计算时间步长、迭代次数等要在<code>.sim</code>文件中先定义好，生成网格、配置好边界条件再行上传计算。</p>
<p>如果算例文件比较大，可以压缩上传再解压。也可以清除掉网格再上传，通过调用宏重新生成网格、定义边界条件、计算。</p>
<h2 id="4-提交计算任务"><a href="#4-提交计算任务" class="headerlink" title="4. 提交计算任务"></a>4. 提交计算任务</h2><p>通过<code>sbatch</code>命令提交计算任务。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sbatch carbin_tcm.slurm</span><br></pre></td></tr></table></figure>

<p>提交后自动生成ID、排队，本算例ID号为899634。</p>
<p><img src="/../../images/09-%E6%8F%90%E4%BA%A4%E8%AE%A1%E7%AE%97.png" alt="09-提交计算.png"></p>
<p>通过<code>squeue</code>命令查看计算任务队列。</p>
<p><img src="/../../images/10-%E8%AE%A1%E7%AE%97%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97.png" alt="10-计算任务队列.png"></p>
<p>计算完成后，打包下载输出文件即可。</p>
<p><img src="/../../images/11-%E8%BE%93%E5%87%BA%E6%96%87%E4%BB%B6.png" alt="11-输出文件.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/03/26/%E7%9F%A5%E4%B9%8E%E6%97%A7%E6%96%87%E7%AB%A0/%E8%B6%85%E7%AE%97%E5%B9%B3%E5%8F%B0%E9%83%A8%E7%BD%B2STAR-CCM+/" data-id="cm8orhqqx0002q009102w3b0c" data-title="超算平台部署STAR-CCM+" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-知乎旧文章/求解器验证对比——旋转和静止同心圆柱之间的层流" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/03/26/%E7%9F%A5%E4%B9%8E%E6%97%A7%E6%96%87%E7%AB%A0/%E6%B1%82%E8%A7%A3%E5%99%A8%E9%AA%8C%E8%AF%81%E5%AF%B9%E6%AF%94%E2%80%94%E2%80%94%E6%97%8B%E8%BD%AC%E5%92%8C%E9%9D%99%E6%AD%A2%E5%90%8C%E5%BF%83%E5%9C%86%E6%9F%B1%E4%B9%8B%E9%97%B4%E7%9A%84%E5%B1%82%E6%B5%81/" class="article-date">
  <time class="dt-published" datetime="2025-03-25T17:27:14.452Z" itemprop="datePublished">2025-03-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/03/26/%E7%9F%A5%E4%B9%8E%E6%97%A7%E6%96%87%E7%AB%A0/%E6%B1%82%E8%A7%A3%E5%99%A8%E9%AA%8C%E8%AF%81%E5%AF%B9%E6%AF%94%E2%80%94%E2%80%94%E6%97%8B%E8%BD%AC%E5%92%8C%E9%9D%99%E6%AD%A2%E5%90%8C%E5%BF%83%E5%9C%86%E6%9F%B1%E4%B9%8B%E9%97%B4%E7%9A%84%E5%B1%82%E6%B5%81/">求解器验证对比——旋转和静止同心圆柱之间的层流</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>08&#x2F;14&#x2F;2021</p>
<hr>
<p>本文采用不同CFD求解器，对层流流动问题进行验证。通过列举不同求解器的操作过程和输出结果的差异，验证各个求解器的精度。</p>
<hr>
<p>[TOC]</p>
<hr>
<h2 id="1-问题描述"><a href="#1-问题描述" class="headerlink" title="1. 问题描述"></a>1. 问题描述</h2><p>如下图，建立两个同心圆柱间的定常层流模型。流动由内筒以恒定角速度旋转而引起，而外筒保持静止。使用周期性边界，只需要对流域的一部分进行建模。物理模型和输入数据如下表所示。</p>
<p><img src="/../../images/20210814-1-1.png" alt="20210814-1-1.png"></p>
<table>
<thead>
<tr>
<th>来源</th>
<th>Ansys验证算例</th>
</tr>
</thead>
<tbody><tr>
<td>参考文献</td>
<td>F. M. White. Viscous Fluid Flow. Section 3-2.3. McGraw-Hill Book Co., Inc.. New York, NY. 1991.</td>
</tr>
<tr>
<td>物理模型</td>
<td>层流，旋转壁面</td>
</tr>
</tbody></table>
<p>流体物性参数、几何尺寸和边界条件如下表所示。</p>
<table>
<thead>
<tr>
<th align="left">特征</th>
<th>单位</th>
<th>参数</th>
</tr>
</thead>
<tbody><tr>
<td align="left">流体密度</td>
<td>kg&#x2F;m^3</td>
<td>1.0</td>
</tr>
<tr>
<td align="left">流体粘度</td>
<td>kg&#x2F;m-s</td>
<td>0.0002</td>
</tr>
<tr>
<td align="left">内圆柱半径</td>
<td>mm</td>
<td>17.8</td>
</tr>
<tr>
<td align="left">外圆柱半径</td>
<td>mm</td>
<td>46.28</td>
</tr>
<tr>
<td align="left">内圆柱转速</td>
<td>rad&#x2F;s</td>
<td>1.0</td>
</tr>
</tbody></table>
<p>本文所用求解器和输入模型如下。</p>
<table>
<thead>
<tr>
<th>求解器</th>
<th>输入模型</th>
</tr>
</thead>
<tbody><tr>
<td>Ansys Fluent 2020R2</td>
<td>VMFL001_rot_conc_cyl_2D.msh</td>
</tr>
<tr>
<td>Ansys CFX 2020R2</td>
<td>VMFL001_rot_conc_cyl_3D.msh</td>
</tr>
<tr>
<td>Siemens STAR-CCM+ 2020.2.1(15.04.010-R8)</td>
<td>VMFL001_rot_conc_cyl_2D.msh</td>
</tr>
<tr>
<td>OpenFOAM v2006</td>
<td>VMFL001_rot_conc_cyl_2D.msh</td>
</tr>
<tr>
<td>SU2 v7.1.1</td>
<td>VMFL001_rot_conc_cyl_2D.cgns</td>
</tr>
</tbody></table>
<h2 id="2-Fluent验证"><a href="#2-Fluent验证" class="headerlink" title="2. Fluent验证"></a>2. Fluent验证</h2><h3 id="2-1-求解器设置"><a href="#2-1-求解器设置" class="headerlink" title="2.1 求解器设置"></a>2.1 求解器设置</h3><p>打开Fluent，选择2D求解器。网格数量较少，只用1个处理器核心运行。</p>
<p><img src="/../../images/20210814-2-1.png" alt="20210814-2-1.png"></p>
<p>导入网格模型VMFL001_rot_conc_cyl_2D.msh，如下所示。</p>
<p><img src="/../../images/20210814-2-2.png" alt="20210814-2-2.png"></p>
<p>更改物理模型，选择层流。</p>
<p><img src="/../../images/20210814-2-3.png" alt="20210814-2-3.png"></p>
<p>更改流体参数。将”air”重命名为”vmfl001”，密度1kg&#x2F;m3，粘度0.0002kg&#x2F;m-s。</p>
<p><img src="/../../images/20210814-2-4.png" alt="20210814-2-4.png"></p>
<p><img src="/../../images/20210814-2-5.png" alt="20210814-2-5.png"></p>
<p>可以看到导入的periodic（id&#x3D;10）和shadow_periodic（id&#x3D;13）边界不是周期边界，需要在命令行窗口中输入<code>/mesh/modify-zones/make-periodic</code>命令，建立周期边界。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; /mesh/modify-zones/make-periodic</span><br><span class="line">Periodic zone [()] 10</span><br><span class="line">Shadow zone [()] 13</span><br><span class="line">Rotationally periodic? (if no, translationally) [yes] yes</span><br><span class="line">Create periodic zones? [yes] yes</span><br></pre></td></tr></table></figure>

<p>更改innerwall（id&#x3D;11）边界为旋转壁面，设置如下。</p>
<p><img src="/../../images/20210814-2-6.png" alt="20210814-2-6.png"></p>
<p>求解器选择SIMPLE，如下所示。</p>
<p><img src="/../../images/20210814-2-7.png" alt="20210814-2-7.png"></p>
<p>收敛残差更改为1e-6，初始化。</p>
<p><img src="/../../images/20210814-2-8.png" alt="20210814-2-8.png"></p>
<p><img src="/../../images/20210814-2-9.png" alt="20210814-2-9.png"></p>
<p>迭代步数800，求解并保存。</p>
<p><img src="/../../images/20210814-2-10.png" alt="20210814-2-10.png"></p>
<p><img src="/../../images/20210814-2-11.png" alt="20210814-2-11.png"></p>
<h3 id="2-2-后处理"><a href="#2-2-后处理" class="headerlink" title="2.2 后处理"></a>2.2 后处理</h3><p>在半径20~35mm处建立4个点，坐标如下表所示。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>x (m)</th>
<th>y (m)</th>
</tr>
</thead>
<tbody><tr>
<td>point-1</td>
<td>0.02</td>
<td>0</td>
</tr>
<tr>
<td>point-2</td>
<td>0.025</td>
<td>0</td>
</tr>
<tr>
<td>point-3</td>
<td>0.03</td>
<td>0</td>
</tr>
<tr>
<td>point-4</td>
<td>0.035</td>
<td>0</td>
</tr>
</tbody></table>
<p><img src="/../../images/20210814-2-12.png" alt="20210814-2-12.png"></p>
<p><img src="/../../images/20210814-2-13.png" alt="20210814-2-13.png"></p>
<p>输出四个点的切向速度。</p>
<p><img src="/../../images/20210814-2-14.png" alt="20210814-2-14.png"></p>
<p>新建一条水平方向的直线，输出不同半径下的切向速度分布曲线。</p>
<p><img src="/../../images/20210814-2-15.png" alt="20210814-2-15.png"></p>
<p><img src="/../../images/20210814-2-16.png" alt="20210814-2-16.png"></p>
<p><img src="/../../images/20210814-2-17.png" alt="20210814-2-17.png"></p>
<p>将曲线点数据输出到文件中备用。</p>
<p><img src="/../../images/20210814-2-18.png" alt="20210814-2-18.png"></p>
<p>层流方程与Fluent计算结果误差对比。</p>
<table>
<thead>
<tr>
<th>半径 [mm]</th>
<th>切向速度（理论值） [m&#x2F;s]</th>
<th>切向速度（Fluent仿真结果）[m&#x2F;s]</th>
<th>误差 [%]</th>
</tr>
</thead>
<tbody><tr>
<td>20</td>
<td>0.0151</td>
<td>0.015027723</td>
<td>0.48</td>
</tr>
<tr>
<td>25</td>
<td>0.0105</td>
<td>0.010464473</td>
<td>0.34</td>
</tr>
<tr>
<td>30</td>
<td>0.0072</td>
<td>0.0071237963</td>
<td>1.06</td>
</tr>
<tr>
<td>35</td>
<td>0.0046</td>
<td>0.0044973576</td>
<td>2.23</td>
</tr>
</tbody></table>
<h2 id="3-CFX验证"><a href="#3-CFX验证" class="headerlink" title="3. CFX验证"></a>3. CFX验证</h2><h3 id="3-1-求解器设置"><a href="#3-1-求解器设置" class="headerlink" title="3.1 求解器设置"></a>3.1 求解器设置</h3><p>启动CFX-Pre，新建算例，导入fluent网格文件VMFL001_rot_conc_cyl_3D.msh。</p>
<p><img src="/../../images/20210814-3-1.png" alt="20210814-3-1.png"></p>
<p>新建材料，命名为”vmfl001”。密度1 [kg m^-3]，动力粘度0.0002 [Pa s]。</p>
<p><img src="/../../images/20210814-3-2.png" alt="20210814-3-2.png"></p>
<p>新建流体域（Domain），命名为FLUID，网格区域（Location）选择FLUID。材料选择刚刚新建的vmfl001。关闭传换热方程，湍流方程选择None(Laminar)。</p>
<p><img src="/../../images/20210814-3-3.png" alt="20210814-3-3.png"></p>
<p><img src="/../../images/20210814-3-4.png" alt="20210814-3-4.png"></p>
<p>在此流体域中新建边界，所对应的网格边界如下表所示。</p>
<table>
<thead>
<tr>
<th>流体边界</th>
<th>网格边界</th>
<th>边界类型</th>
</tr>
</thead>
<tbody><tr>
<td>INNERWALL</td>
<td>INNERWALL</td>
<td>Wall</td>
</tr>
<tr>
<td>OUTERWALL</td>
<td>OUTERWALL</td>
<td>Wall</td>
</tr>
<tr>
<td>SYMM 1</td>
<td>SYMM 1</td>
<td>Symmetry</td>
</tr>
<tr>
<td>SYMM 2</td>
<td>SYMM 2</td>
<td>Symmetry</td>
</tr>
</tbody></table>
<p>其中，INNERWALL指定为旋转壁面，如下图所示，角速度 1 [radian s^-1]。</p>
<p><img src="/../../images/20210814-3-5.png" alt="20210814-3-5.png"></p>
<p>新建交界面（Interfaces），命名为PERIODIC，如下图所示。</p>
<p><img src="/../../images/20210814-3-6.png" alt="20210814-3-6.png"></p>
<p>新建全局初始化（Global Initialization），直接确认，采用默认值即可。</p>
<p><img src="/../../images/20210814-3-7.png" alt="20210814-3-7.png"></p>
<p>更改求解器控制（Solver Control），最大迭代步数改为1000，残差类型改为MAX，收敛残差目标改为1e-6。</p>
<p><img src="/../../images/20210814-3-8.png" alt="20210814-3-8.png"></p>
<p>保存算例，输出.def文件。打开CFS-Solver Manager载入.def文件，求解器类型选择双精度，开始求解。</p>
<p><img src="/../../images/20210814-3-9.png" alt="20210814-3-9.png"></p>
<p>大概23步左右就收敛了。</p>
<p><img src="/../../images/20210814-3-10.png" alt="20210814-3-10.png"></p>
<h3 id="3-2-后处理"><a href="#3-2-后处理" class="headerlink" title="3.2 后处理"></a>3.2 后处理</h3><p>打开CFD-Post，载入求解完毕输出的结果文件。在半径20~35mm处建立4个点，如下表。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>x (m)</th>
<th>y (m)</th>
<th>z (m)</th>
</tr>
</thead>
<tbody><tr>
<td>Point 1</td>
<td>0.02</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>Point 2</td>
<td>0.025</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>Point 3</td>
<td>0.03</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>Point 4</td>
<td>0.035</td>
<td>0</td>
<td>0</td>
</tr>
</tbody></table>
<p>建立如下4个表达式（Expressions），输出4个点的切向速度。</p>
<table>
<thead>
<tr>
<th>表达式名称</th>
<th>表达式定义</th>
</tr>
</thead>
<tbody><tr>
<td>VelYOnPoint1</td>
<td>maxVal(Velocity v)@Point 1</td>
</tr>
<tr>
<td>VelYOnPoint2</td>
<td>maxVal(Velocity v)@Point 2</td>
</tr>
<tr>
<td>VelYOnPoint3</td>
<td>maxVal(Velocity v)@Point 3</td>
</tr>
<tr>
<td>VelYOnPoint4</td>
<td>maxVal(Velocity v)@Point 4</td>
</tr>
</tbody></table>
<p>新建Table，将4个点的半径和速度列出。</p>
<p><img src="/../../images/20210814-3-11.png" alt="20210814-3-11.png"></p>
<p>建立直线”Line 1”，如下图所示。</p>
<p><img src="/../../images/20210814-3-12.png" alt="20210814-3-12.png"></p>
<p>建立曲线图（Chart），“Data Series”中的”Location”选择刚刚建立的”Line 1”，”X Axis”中的“Variable”选择”X”，”Y Axis”中的“Variable”选择”Velocity v”，输出曲线如下图所示。将曲线数据导出到.csv文件中备用。</p>
<p><img src="/../../images/20210814-3-13.png" alt="20210814-3-13.png"></p>
<p>层流方程与CFX计算结果误差对比。</p>
<table>
<thead>
<tr>
<th>半径 [mm]</th>
<th>切向速度（理论值） [m&#x2F;s]</th>
<th>切向速度（CFX仿真结果）[m&#x2F;s]</th>
<th>误差 [%]</th>
</tr>
</thead>
<tbody><tr>
<td>20</td>
<td>0.0151</td>
<td>0.0150925</td>
<td>0.05</td>
</tr>
<tr>
<td>25</td>
<td>0.0105</td>
<td>0.0105287</td>
<td>0.27</td>
</tr>
<tr>
<td>30</td>
<td>0.0072</td>
<td>0.00718282</td>
<td>0.24</td>
</tr>
<tr>
<td>35</td>
<td>0.0046</td>
<td>0.00454726</td>
<td>1.15</td>
</tr>
</tbody></table>
<h2 id="4-STAR-CCM-验证"><a href="#4-STAR-CCM-验证" class="headerlink" title="4. STAR-CCM+验证"></a>4. STAR-CCM+验证</h2><h3 id="4-1-求解器设置"><a href="#4-1-求解器设置" class="headerlink" title="4.1 求解器设置"></a>4.1 求解器设置</h3><p>打开STAR-CCM+，由于网格数较少，进程选项可以选择串行，只用1个处理器核心进行求解。导入fluent网格文件VMFL001_rot_conc_cyl_2D.msh。</p>
<p><img src="/../../images/20210814-4-1.png" alt="20210814-4-1.png"></p>
<p>选择求解器物理模型，如下图所示。</p>
<p><img src="/../../images/20210814-4-2.png" alt="20210814-4-2.png"></p>
<p>将气体材料”Air”重命名为”vmfl001”，密度修改为1.0 kg&#x2F;m^3，动力粘度修改为2.0E-4 Pa-s。</p>
<p><img src="/../../images/20210814-4-3.png" alt="20210814-4-3.png"></p>
<p>展开流体区域中的”FLUID-7”，同时选中”PERIODIC”和”SHADOW_PERIODIC”边界，右键创建界面。新建的交界面拓扑改为”周期”，周期转换选择”旋转”，旋转轴指定改为”指定轴”，轴的方向为”[0.0, 0.0, 1.0]”。</p>
<p><img src="/../../images/20210814-4-4.png" alt="20210814-4-4.png"></p>
<p>在”工具”、”运动”中新建旋转运动，旋转轴方向[0.0, 0.0, 1.0]，旋转速率1.0 radian&#x2F;s。</p>
<p><img src="/../../images/20210814-4-5.png" alt="20210814-4-5.png"></p>
<p>将INNERWALL边界的参考坐标系指定选项更改为”局部参考坐标系”，边界参考坐标系指定选择刚刚新建的旋转运动的坐标系。</p>
<p><img src="/../../images/20210814-4-6.png" alt="20210814-4-6.png"></p>
<p>停止标准中的最大迭代步数默认为1000，运行求解并保存算例。</p>
<p><img src="/../../images/20210814-4-7.png" alt="20210814-4-7.png"></p>
<h3 id="4-2-后处理"><a href="#4-2-后处理" class="headerlink" title="4.2 后处理"></a>4.2 后处理</h3><p>在衍生零部件中新建4个探针点，如下表。</p>
<p><img src="/../../images/20210814-4-8.png" alt="20210814-4-8.png"></p>
<table>
<thead>
<tr>
<th>名称</th>
<th>x (m)</th>
<th>y (m)</th>
<th>z (m)</th>
</tr>
</thead>
<tbody><tr>
<td>p1</td>
<td>0.02</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>p2</td>
<td>0.025</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>p3</td>
<td>0.03</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>p4</td>
<td>0.035</td>
<td>0</td>
<td>0</td>
</tr>
</tbody></table>
<p>同样地，在衍生零部件中新建等值面”y&#x3D;0”，如下图。</p>
<p><img src="/../../images/20210814-4-9.png" alt="20210814-4-9.png"></p>
<p>在”工具”、”表”中新建”XYZ内部表”，标量选择”[Velocity[j]]”，零部件选择新建的p1~p4四个点，邮件提取然后制表，显示4个点的切向速度。</p>
<p><img src="/../../images/20210814-4-10.png" alt="20210814-4-10.png"></p>
<p>在”绘图”中新建”XY绘图”，零部件选择新建的等值面”y&#x3D;0”，”Y类型”、”Y Type 1”中的场函数选择”[Velocity[j]]”，曲线图如下。将曲线数据导出到.csv文件中备用。</p>
<p><img src="/../../images/20210814-4-11.png" alt="20210814-4-11.png"></p>
<p>层流方程与STAR-CCM+计算结果误差对比。</p>
<table>
<thead>
<tr>
<th>半径 [mm]</th>
<th>切向速度（理论值） [m&#x2F;s]</th>
<th>切向速度（STAR-CCM+仿真结果）[m&#x2F;s]</th>
<th>误差 [%]</th>
</tr>
</thead>
<tbody><tr>
<td>20</td>
<td>0.0151</td>
<td>0.0153266630659337</td>
<td>1.50</td>
</tr>
<tr>
<td>25</td>
<td>0.0105</td>
<td>0.0106689558311781</td>
<td>1.61</td>
</tr>
<tr>
<td>30</td>
<td>0.0072</td>
<td>0.00671828465572254</td>
<td>6.69</td>
</tr>
<tr>
<td>35</td>
<td>0.0046</td>
<td>0.004432094526565</td>
<td>3.65</td>
</tr>
</tbody></table>
<h2 id="5-OpenFOAM验证"><a href="#5-OpenFOAM验证" class="headerlink" title="5. OpenFOAM验证"></a>5. OpenFOAM验证</h2><h3 id="5-1-求解器设置"><a href="#5-1-求解器设置" class="headerlink" title="5.1 求解器设置"></a>5.1 求解器设置</h3><p>首先将官方自带案例中的simpleCar复制到当前目录下并重命名为vmfl001，这里用的是MSYS2作为命令行交互界面，执行以下命令。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> -r <span class="variable">$FOAM_TUTORIALS</span>/incompressible/simpleFoam/simpleCar .</span><br><span class="line"><span class="built_in">mv</span> simpleCar vmfl001</span><br><span class="line"><span class="built_in">cd</span> vmfl001</span><br></pre></td></tr></table></figure>

<p>将VMFL001_rot_conc_cyl_2D.msh文件复制到vmfl001文件夹中，执行以下命令，将fluent网格转换为OpenFOAM网格。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fluentMeshToFoam VMFL001_rot_conc_cyl_2D.msh</span><br></pre></td></tr></table></figure>

<p>打开constant&#x2F;polyMesh&#x2F;boundary文件，修改如下，将”PERIODIC”和”SHADOW_PERIODIC”边界由壁面改为周期边界。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">FoamFile</span><br><span class="line">&#123;</span><br><span class="line">    version     <span class="number">2.0</span>;</span><br><span class="line">    format      ascii;</span><br><span class="line">    <span class="keyword">class</span>       <span class="title class_">polyBoundaryMesh</span>;</span><br><span class="line">    location    <span class="string">&quot;constant/polyMesh&quot;</span>;</span><br><span class="line">    object      boundary;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">5</span></span><br><span class="line">(</span><br><span class="line">    PERIODIC</span><br><span class="line">    &#123;</span><br><span class="line">        type            cyclicAMI;</span><br><span class="line">        inGroups        <span class="number">1</span>(wall);</span><br><span class="line">        nFaces          <span class="number">20</span>;</span><br><span class="line">        startFace       <span class="number">2320</span>;</span><br><span class="line">        matchTolerance  <span class="number">0.0001</span>;</span><br><span class="line">        transform       rotational;</span><br><span class="line">        <span class="built_in">rotationAxis</span>    (<span class="number">0</span> <span class="number">0</span> <span class="number">1</span>);</span><br><span class="line">        <span class="built_in">rotationCentre</span>  (<span class="number">0</span> <span class="number">0</span> <span class="number">0</span>);</span><br><span class="line">        neighbourPatch  SHADOW_PERIODIC;</span><br><span class="line">    &#125;</span><br><span class="line">    INNERWALL</span><br><span class="line">    &#123;</span><br><span class="line">        type            wall;</span><br><span class="line">        inGroups        <span class="number">1</span>(wall);</span><br><span class="line">        nFaces          <span class="number">60</span>;</span><br><span class="line">        startFace       <span class="number">2340</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    OUTERWALL</span><br><span class="line">    &#123;</span><br><span class="line">        type            wall;</span><br><span class="line">        inGroups        <span class="number">1</span>(wall);</span><br><span class="line">        nFaces          <span class="number">60</span>;</span><br><span class="line">        startFace       <span class="number">2400</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    SHADOW_PERIODIC</span><br><span class="line">    &#123;</span><br><span class="line">        type            cyclicAMI;</span><br><span class="line">        inGroups        <span class="number">1</span>(wall);</span><br><span class="line">        nFaces          <span class="number">20</span>;</span><br><span class="line">        startFace       <span class="number">2460</span>;</span><br><span class="line">        matchTolerance  <span class="number">0.0001</span>;</span><br><span class="line">        transform       rotational;</span><br><span class="line">        <span class="built_in">rotationAxis</span>    (<span class="number">0</span> <span class="number">0</span> <span class="number">1</span>);</span><br><span class="line">        <span class="built_in">rotationCentre</span>  (<span class="number">0</span> <span class="number">0</span> <span class="number">0</span>);</span><br><span class="line">        neighbourPatch  PERIODIC;</span><br><span class="line">    &#125;</span><br><span class="line">    frontAndBackPlanes</span><br><span class="line">    &#123;</span><br><span class="line">        type            empty;</span><br><span class="line">        inGroups        <span class="number">1</span>(empty);</span><br><span class="line">        nFaces          <span class="number">2400</span>;</span><br><span class="line">        startFace       <span class="number">2480</span>;</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>删除vmfl001目录下的”Allrun”文件。删除vmfl001&#x2F;0目录下的”epsilon”、”k”和”nut”，只保留”p”和”U”。</p>
<p>修改”p”文件如下。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">FoamFile</span><br><span class="line">&#123;</span><br><span class="line">    version     <span class="number">2.0</span>;</span><br><span class="line">    format      ascii;</span><br><span class="line">    <span class="keyword">class</span>       <span class="title class_">volScalarField</span>;</span><br><span class="line">    object      p;</span><br><span class="line">&#125;</span><br><span class="line">dimensions      [<span class="number">0</span> <span class="number">2</span> <span class="number">-2</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>];</span><br><span class="line">internalField   uniform <span class="number">0</span>;</span><br><span class="line">boundaryField</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;(INNERWALL|OUTERWALL)&quot;</span></span><br><span class="line">    &#123;</span><br><span class="line">        type            zeroGradient;</span><br><span class="line">    &#125;</span><br><span class="line">    frontAndBackPlanes</span><br><span class="line">    &#123;</span><br><span class="line">        type            empty;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="string">&quot;(PERIODIC|SHADOW_PERIODIC)&quot;</span></span><br><span class="line">    &#123;</span><br><span class="line">        type            cyclicAMI;</span><br><span class="line">        value           $internalField;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>修改”U”文件如下。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">FoamFile</span><br><span class="line">&#123;</span><br><span class="line">    version     <span class="number">2.0</span>;</span><br><span class="line">    format      ascii;</span><br><span class="line">    <span class="keyword">class</span>       <span class="title class_">volVectorField</span>;</span><br><span class="line">    object      U;</span><br><span class="line">&#125;</span><br><span class="line">dimensions      [<span class="number">0</span> <span class="number">1</span> <span class="number">-1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>];</span><br><span class="line"><span class="function">internalField   <span class="title">uniform</span> <span class="params">(<span class="number">0</span> <span class="number">0</span> <span class="number">0</span>)</span></span>;</span><br><span class="line">boundaryField</span><br><span class="line">&#123;</span><br><span class="line">    INNERWALL</span><br><span class="line">    &#123;</span><br><span class="line">        type            rotatingWallVelocity;</span><br><span class="line">        <span class="built_in">axis</span>            (<span class="number">0</span> <span class="number">0</span> <span class="number">1</span>);</span><br><span class="line">        <span class="built_in">origin</span>          (<span class="number">0</span> <span class="number">0</span> <span class="number">0</span>);</span><br><span class="line">        omega           constant <span class="number">1.0</span>;</span><br><span class="line">        <span class="function">value           <span class="title">uniform</span> <span class="params">(<span class="number">0</span> <span class="number">0</span> <span class="number">0</span>)</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">    OUTERWALL</span><br><span class="line">    &#123;</span><br><span class="line">        type            noSlip;</span><br><span class="line">    &#125;</span><br><span class="line">    frontAndBackPlanes</span><br><span class="line">    &#123;</span><br><span class="line">        type            empty;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="string">&quot;(PERIODIC|SHADOW_PERIODIC)&quot;</span></span><br><span class="line">    &#123;</span><br><span class="line">        type            cyclicAMI;</span><br><span class="line">        value           $internalField;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>执行以下命令，检查网格边界条件设置。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">checkMesh</span><br></pre></td></tr></table></figure>

<p>修改constant目录下的”transportProperties”文件，将nu值改为0.0002。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">FoamFile</span><br><span class="line">&#123;</span><br><span class="line">    version     <span class="number">2.0</span>;</span><br><span class="line">    format      ascii;</span><br><span class="line">    <span class="keyword">class</span>       <span class="title class_">dictionary</span>;</span><br><span class="line">    location    <span class="string">&quot;constant&quot;</span>;</span><br><span class="line">    object      transportProperties;</span><br><span class="line">&#125;</span><br><span class="line">transportModel  Newtonian;</span><br><span class="line">nu              <span class="number">0.0002</span>;</span><br></pre></td></tr></table></figure>

<p>修改constant目录下的”turbulenceProperties”文件，采用层流模型。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">FoamFile</span><br><span class="line">&#123;</span><br><span class="line">    version     <span class="number">2.0</span>;</span><br><span class="line">    format      ascii;</span><br><span class="line">    <span class="keyword">class</span>       <span class="title class_">dictionary</span>;</span><br><span class="line">    object      turbulenceProperties;</span><br><span class="line">&#125;</span><br><span class="line">simulationType laminar;</span><br></pre></td></tr></table></figure>

<p>system目录下，只保留”controlDict”、”fvSchemes”和”fvSolution”三个文件，其他的全部删除。</p>
<p>修改”controlDict”文件如下，求解程序simpleFoam，从保存的最后一步开始求解，迭代步数1000步，每隔100步写入求解结果。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">FoamFile</span><br><span class="line">&#123;</span><br><span class="line">    version     <span class="number">2.0</span>;</span><br><span class="line">    format      ascii;</span><br><span class="line">    <span class="keyword">class</span>       <span class="title class_">dictionary</span>;</span><br><span class="line">    location    <span class="string">&quot;system&quot;</span>;</span><br><span class="line">    object      controlDict;</span><br><span class="line">&#125;</span><br><span class="line">application     simpleFoam;</span><br><span class="line">startFrom       latestTime;</span><br><span class="line">startTime       <span class="number">0</span>;</span><br><span class="line">stopAt          endTime;</span><br><span class="line">endTime         <span class="number">1000</span>;</span><br><span class="line">deltaT          <span class="number">1</span>;</span><br><span class="line">writeControl    timeStep;</span><br><span class="line">writeInterval   <span class="number">100</span>;</span><br><span class="line">purgeWrite      <span class="number">1</span>;</span><br><span class="line">writeFormat     ascii;</span><br><span class="line">writePrecision  <span class="number">8</span>;</span><br><span class="line">writeCompression off;</span><br><span class="line">timeFormat      general;</span><br><span class="line">timePrecision   <span class="number">8</span>;</span><br><span class="line">runTimeModifiable <span class="literal">true</span>;</span><br></pre></td></tr></table></figure>

<p>修改”fvSolution”文件如下。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">FoamFile</span><br><span class="line">&#123;</span><br><span class="line">    version     <span class="number">2.0</span>;</span><br><span class="line">    format      ascii;</span><br><span class="line">    <span class="keyword">class</span>       <span class="title class_">dictionary</span>;</span><br><span class="line">    location    <span class="string">&quot;system&quot;</span>;</span><br><span class="line">    object      fvSolution;</span><br><span class="line">&#125;</span><br><span class="line">solvers</span><br><span class="line">&#123;</span><br><span class="line">    p</span><br><span class="line">    &#123;</span><br><span class="line">        solver          GAMG;</span><br><span class="line">        smoother        GaussSeidel;</span><br><span class="line">        tolerance       <span class="number">1e-08</span>;</span><br><span class="line">        relTol          <span class="number">0.01</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    U</span><br><span class="line">    &#123;</span><br><span class="line">        solver          smoothSolver;</span><br><span class="line">        smoother        symGaussSeidel;</span><br><span class="line">        tolerance       <span class="number">1e-08</span>;</span><br><span class="line">        relTol          <span class="number">0.01</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">SIMPLE</span><br><span class="line">&#123;</span><br><span class="line">    nNonOrthogonalCorrectors <span class="number">0</span>;</span><br><span class="line">    residualControl</span><br><span class="line">    &#123;</span><br><span class="line">        p               <span class="number">1e-8</span>;</span><br><span class="line">        U               <span class="number">1e-8</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    pRefCell <span class="number">0</span>;</span><br><span class="line">    pRefValue <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">relaxationFactors</span><br><span class="line">&#123;</span><br><span class="line">    fields</span><br><span class="line">    &#123;</span><br><span class="line">        p               <span class="number">0.3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    equations</span><br><span class="line">    &#123;</span><br><span class="line">        U               <span class="number">0.7</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>回到vmfl001目录，执行以下命令（Windows下若用到tee命令，可以在Powershell里执行），运行求解并记录求解过程输出。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">simpleFoam | <span class="built_in">tee</span> simpleFoam.<span class="built_in">log</span></span><br></pre></td></tr></table></figure>

<h3 id="5-2-后处理"><a href="#5-2-后处理" class="headerlink" title="5.2 后处理"></a>5.2 后处理</h3><p>Linux下可以直接使用<code>paraFoam</code>启动ParaView进行后处理。在Windows下执行以下命令，在vmfl001目录中生成.foam文件，用ParaView打开.foam文件方能载入OpenFOAM的求解结果。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> . &gt; vmfl001.foam</span><br></pre></td></tr></table></figure>

<p><img src="/../../images/20210814-5-1.png" alt="20210814-5-1.png"></p>
<p>以vmfl001.foam为基础，新建4个”Probe Location”，用于提取20~35mm处的切向速度。</p>
<p><img src="/../../images/20210814-5-2.png" alt="20210814-5-2.png"></p>
<table>
<thead>
<tr>
<th>名称</th>
<th>Center</th>
<th>Radius</th>
</tr>
</thead>
<tbody><tr>
<td>ProbeLocation1</td>
<td>(0.020,0,0)</td>
<td>0</td>
</tr>
<tr>
<td>ProbeLocation2</td>
<td>(0.025,0,0)</td>
<td>0</td>
</tr>
<tr>
<td>ProbeLocation3</td>
<td>(0.030,0,0)</td>
<td>0</td>
</tr>
<tr>
<td>ProbeLocation4</td>
<td>(0.035,0,0)</td>
<td>0</td>
</tr>
</tbody></table>
<p>新建GroupDatasets，包含上述4个ProbeLocation。</p>
<p><img src="/../../images/20210814-5-3.png" alt="20210814-5-3.png"></p>
<p>选中该GroupDatasets，可在右侧”SpreadSheetView”窗口中看到4个点位置的切向速度值。</p>
<p><img src="/../../images/20210814-5-4.png" alt="20210814-5-4.png"></p>
<p>以vmfl001.foam为基础，建立”PlotOnIntersectionCurves”绘图。</p>
<p><img src="/../../images/20210814-5-5.png" alt="20210814-5-5.png"></p>
<p>平面方向选择Y轴正向，如图所示。</p>
<p><img src="/../../images/20210814-5-6.png" alt="20210814-5-6.png"></p>
<p>X轴显示变量选择”Points_X”，Y轴显示变量选择”U_Y”，如图所示。</p>
<p><img src="/../../images/20210814-5-7.png" alt="20210814-5-7.png"></p>
<p>右侧”LineChartView”窗口可以查看生成的曲线。</p>
<p><img src="/../../images/20210814-5-8.png" alt="20210814-5-8.png"></p>
<p>选择”File”、”Export Scene”，可以将曲线数据导出到csv文件中。</p>
<p>层流方程与OpenFOAM计算结果误差对比。</p>
<table>
<thead>
<tr>
<th>半径 [mm]</th>
<th>切向速度（理论值） [m&#x2F;s]</th>
<th>切向速度（OpenFOAM仿真结果）[m&#x2F;s]</th>
<th>误差 [%]</th>
</tr>
</thead>
<tbody><tr>
<td>20</td>
<td>0.0151</td>
<td>0.0150</td>
<td>0.66</td>
</tr>
<tr>
<td>25</td>
<td>0.0105</td>
<td>0.0104366</td>
<td>0.60</td>
</tr>
<tr>
<td>30</td>
<td>0.0072</td>
<td>0.00712633</td>
<td>1.02</td>
</tr>
<tr>
<td>35</td>
<td>0.0046</td>
<td>0.00452779</td>
<td>1.57</td>
</tr>
</tbody></table>
<h2 id="6-SU2验证"><a href="#6-SU2验证" class="headerlink" title="6. SU2验证"></a>6. SU2验证</h2><h3 id="6-1-求解器设置"><a href="#6-1-求解器设置" class="headerlink" title="6.1 求解器设置"></a>6.1 求解器设置</h3><p>SU2求解器配置文件vmfl001.cfg内容如下：</p>
<figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% ------------- DIRECT, ADJOINT, AND LINEARIZED PROBLEM DEFINITION ------------%</span></span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Physical governing equations (EULER, NAVIER_STOKES,</span></span><br><span class="line"><span class="comment">%                               WAVE_EQUATION, HEAT_EQUATION, FEM_ELASTICITY,</span></span><br><span class="line"><span class="comment">%                               POISSON_EQUATION)</span></span><br><span class="line">SOLVER= INC<span class="built_in">_</span>NAVIER<span class="built_in">_</span>STOKES</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Specify turbulence model (NONE, SA)</span></span><br><span class="line">KIND<span class="built_in">_</span>TURB<span class="built_in">_</span>MODEL= NONE</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Mathematical problem (DIRECT, CONTINUOUS_ADJOINT)</span></span><br><span class="line">MATH<span class="built_in">_</span>PROBLEM= DIRECT</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Restart solution (NO, YES)</span></span><br><span class="line">RESTART<span class="built_in">_</span>SOL= NO</span><br><span class="line"></span><br><span class="line"><span class="comment">% ---------------- INCOMPRESSIBLE FLOW CONDITION DEFINITION -------------------%</span></span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Density model within the incompressible flow solver.</span></span><br><span class="line"><span class="comment">% Options are CONSTANT (default), BOUSSINESQ, or VARIABLE. If VARIABLE,</span></span><br><span class="line"><span class="comment">% an appropriate fluid model must be selected.</span></span><br><span class="line">INC<span class="built_in">_</span>DENSITY<span class="built_in">_</span>MODEL= CONSTANT</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Solve the energy equation in the incompressible flow solver</span></span><br><span class="line">INC<span class="built_in">_</span>ENERGY<span class="built_in">_</span>EQUATION = YES</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Initial density for incompressible flows (1.2886 kg/m^3 by default)</span></span><br><span class="line">INC<span class="built_in">_</span>DENSITY<span class="built_in">_</span>INIT= 1.0</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Initial temperature for incompressible flows that include the</span></span><br><span class="line"><span class="comment">% energy equation (288.15 K by default). Value is ignored if</span></span><br><span class="line"><span class="comment">% INC_ENERGY_EQUATION is false.</span></span><br><span class="line">INC<span class="built_in">_</span>TEMPERATURE<span class="built_in">_</span>INIT= 293.15</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Initial velocity for incompressible flows (1.0,0,0 m/s by default)</span></span><br><span class="line">INC<span class="built_in">_</span>VELOCITY<span class="built_in">_</span>INIT= ( 1.0, 0.0, 0.0 )</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% ---- IDEAL GAS, POLYTROPIC, VAN DER WAALS AND PENG ROBINSON CONSTANTS -------%</span></span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Fluid model (STANDARD_AIR, IDEAL_GAS, VW_GAS, PR_GAS, </span></span><br><span class="line"><span class="comment">%              CONSTANT_DENSITY, INC_IDEAL_GAS)</span></span><br><span class="line">FLUID<span class="built_in">_</span>MODEL= CONSTANT<span class="built_in">_</span>DENSITY</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Specific heat at constant pressure, Cp (1004.703 J/kg*K (air)).</span></span><br><span class="line"><span class="comment">% Incompressible fluids with energy eqn. only (CONSTANT_DENSITY, INC_IDEAL_GAS).</span></span><br><span class="line">SPECIFIC<span class="built_in">_</span>HEAT<span class="built_in">_</span>CP= 1004.703</span><br><span class="line"></span><br><span class="line"><span class="comment">% --------------------------- VISCOSITY MODEL ---------------------------------%</span></span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Viscosity model (SUTHERLAND, CONSTANT_VISCOSITY).</span></span><br><span class="line">VISCOSITY<span class="built_in">_</span>MODEL= CONSTANT<span class="built_in">_</span>VISCOSITY</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Molecular Viscosity that would be constant (1.716E-5 by default)</span></span><br><span class="line">MU<span class="built_in">_</span>CONSTANT= 0.0002</span><br><span class="line"></span><br><span class="line"><span class="comment">% --------------------------- THERMAL CONDUCTIVITY MODEL ----------------------%</span></span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Conductivity model (CONSTANT_CONDUCTIVITY, CONSTANT_PRANDTL).</span></span><br><span class="line">CONDUCTIVITY<span class="built_in">_</span>MODEL= CONSTANT<span class="built_in">_</span>PRANDTL</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Laminar Prandtl number (0.72 (air), only for CONSTANT_PRANDTL)</span></span><br><span class="line">PRANDTL<span class="built_in">_</span>LAM= 0.72</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Turbulent Prandtl number (0.9 (air), only for CONSTANT_PRANDTL)</span></span><br><span class="line">PRANDTL<span class="built_in">_</span>TURB= 0.90</span><br><span class="line"></span><br><span class="line"><span class="comment">% ---------------------- REFERENCE VALUE DEFINITION ---------------------------%</span></span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Reference origin for moment computation</span></span><br><span class="line">REF<span class="built_in">_</span>ORIGIN<span class="built_in">_</span>MOMENT<span class="built_in">_</span>X = 0.25</span><br><span class="line">REF<span class="built_in">_</span>ORIGIN<span class="built_in">_</span>MOMENT<span class="built_in">_</span>Y = 0.00</span><br><span class="line">REF<span class="built_in">_</span>ORIGIN<span class="built_in">_</span>MOMENT<span class="built_in">_</span>Z = 0.00</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Reference length for pitching, rolling, and yawing non-dimensional moment</span></span><br><span class="line">REF<span class="built_in">_</span>LENGTH= 1.0</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Reference area for force coefficients (0 implies automatic calculation)</span></span><br><span class="line">REF<span class="built_in">_</span>AREA= 1.0</span><br><span class="line"></span><br><span class="line"><span class="comment">% ----------------------- DYNAMIC MESH DEFINITION -----------------------------%</span></span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Type of dynamic surface movement (NONE, DEFORMING,</span></span><br><span class="line"><span class="comment">%                       MOVING_WALL, FLUID_STRUCTURE, FLUID_STRUCTURE_STATIC,</span></span><br><span class="line"><span class="comment">%                       AEROELASTIC, EXTERNAL, EXTERNAL_ROTATION,</span></span><br><span class="line"><span class="comment">%                       AEROELASTIC_RIGID_MOTION)</span></span><br><span class="line">SURFACE<span class="built_in">_</span>MOVEMENT= MOVING<span class="built_in">_</span>WALL</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Moving wall boundary marker(s) (NONE = no marker, ignored for RIGID_MOTION)</span></span><br><span class="line">MARKER<span class="built_in">_</span>MOVING= ( INNERWALL )</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Coordinates of the motion origin</span></span><br><span class="line">SURFACE<span class="built_in">_</span>MOTION<span class="built_in">_</span>ORIGIN= 0.0 0.0 0.0</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Angular velocity vector (rad/s) about the motion origin</span></span><br><span class="line">SURFACE<span class="built_in">_</span>ROTATION<span class="built_in">_</span>RATE = 0.0 0.0 1.0</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% -------------------- BOUNDARY CONDITION DEFINITION --------------------------%</span></span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Navier-Stokes (no-slip), constant heat flux wall  marker(s) (NONE = no marker)</span></span><br><span class="line"><span class="comment">% Format: ( marker name, constant heat flux (J/m^2), ... )</span></span><br><span class="line">MARKER<span class="built_in">_</span>HEATFLUX= ( OUTERWALL, 0.0 )</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Navier-Stokes (no-slip), isothermal wall marker(s) (NONE = no marker)</span></span><br><span class="line"><span class="comment">% Format: ( marker name, constant wall temperature (K), ... )</span></span><br><span class="line">MARKER<span class="built_in">_</span>ISOTHERMAL= ( INNERWALL, 313.15 )</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Periodic boundary marker(s) (NONE = no marker)</span></span><br><span class="line"><span class="comment">% Format: ( periodic marker, donor marker, rotation_center_x, rotation_center_y,</span></span><br><span class="line"><span class="comment">% rotation_center_z, rotation_angle_x-axis, rotation_angle_y-axis,</span></span><br><span class="line"><span class="comment">% rotation_angle_z-axis, translation_x, translation_y, translation_z, ... )</span></span><br><span class="line"><span class="comment">% MARKER_PERIODIC= ( PERIODIC, SHADOW_PERIODIC, 0, 0, 0, 0, 0, 180, 0, 0, 0 )</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Marker(s) of the surface to be plotted or designed</span></span><br><span class="line">MARKER<span class="built_in">_</span>PLOTTING= ( INNERWALL, OUTERWALL )</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Marker(s) of the surface where the functional (Cd, Cl, etc.) will be evaluated</span></span><br><span class="line">MARKER<span class="built_in">_</span>MONITORING= ( NONE )</span><br><span class="line"></span><br><span class="line"><span class="comment">% ------------- COMMON PARAMETERS DEFINING THE NUMERICAL METHOD ---------------%</span></span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Numerical method for spatial gradients (GREEN_GAUSS, WEIGHTED_LEAST_SQUARES)</span></span><br><span class="line">NUM<span class="built_in">_</span>METHOD<span class="built_in">_</span>GRAD= WEIGHTED<span class="built_in">_</span>LEAST<span class="built_in">_</span>SQUARES</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Courant-Friedrichs-Lewy condition of the finest grid</span></span><br><span class="line">CFL<span class="built_in">_</span>NUMBER= 15.0</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Adaptive CFL number (NO, YES)</span></span><br><span class="line">CFL<span class="built_in">_</span>ADAPT= YES</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Parameters of the adaptive CFL number (factor down, factor up, CFL min value,</span></span><br><span class="line"><span class="comment">%                                        CFL max value )</span></span><br><span class="line">CFL<span class="built_in">_</span>ADAPT<span class="built_in">_</span>PARAM= ( 0.1, 2.0, 1.0, 1e10 )</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Number of total iterations</span></span><br><span class="line">ITER= 10000</span><br><span class="line"></span><br><span class="line"><span class="comment">% ------------------------ LINEAR SOLVER DEFINITION ---------------------------%</span></span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Linear solver for the implicit (or discrete adjoint) formulation (BCGSTAB, FGMRES)</span></span><br><span class="line">LINEAR<span class="built_in">_</span>SOLVER= FGMRES</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Preconditioner of the Krylov linear solver (JACOBI, LINELET, LU_SGS)</span></span><br><span class="line">LINEAR<span class="built_in">_</span>SOLVER<span class="built_in">_</span>PREC= ILU</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Linael solver ILU preconditioner fill-in level (0 by default)</span></span><br><span class="line">LINEAR<span class="built_in">_</span>SOLVER<span class="built_in">_</span>ILU<span class="built_in">_</span>FILL<span class="built_in">_</span>IN= 0</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Min error of the linear solver for the implicit formulation</span></span><br><span class="line">LINEAR<span class="built_in">_</span>SOLVER<span class="built_in">_</span>ERROR= 1E-14</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Max number of iterations of the linear solver for the implicit formulation</span></span><br><span class="line">LINEAR<span class="built_in">_</span>SOLVER<span class="built_in">_</span>ITER= 25</span><br><span class="line"></span><br><span class="line"><span class="comment">% -------------------------- MULTIGRID PARAMETERS -----------------------------%</span></span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Multi-Grid Levels (0 = no multi-grid)</span></span><br><span class="line">MGLEVEL= 0</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Multi-grid cycle (V_CYCLE, W_CYCLE, FULLMG_CYCLE)</span></span><br><span class="line">MGCYCLE= W<span class="built_in">_</span>CYCLE</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Multi-grid pre-smoothing level</span></span><br><span class="line">MG<span class="built_in">_</span>PRE<span class="built_in">_</span>SMOOTH= ( 1, 2, 3, 3 )</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Multi-grid post-smoothing level</span></span><br><span class="line">MG<span class="built_in">_</span>POST<span class="built_in">_</span>SMOOTH= ( 0, 0, 0, 0 )</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Jacobi implicit smoothing of the correction</span></span><br><span class="line">MG<span class="built_in">_</span>CORRECTION<span class="built_in">_</span>SMOOTH= ( 0, 0, 0, 0 )</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Damping factor for the residual restriction</span></span><br><span class="line">MG<span class="built_in">_</span>DAMP<span class="built_in">_</span>RESTRICTION= 0.8</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Damping factor for the correction prolongation</span></span><br><span class="line">MG<span class="built_in">_</span>DAMP<span class="built_in">_</span>PROLONGATION= 0.8</span><br><span class="line"></span><br><span class="line"><span class="comment">% -------------------- FLOW NUMERICAL METHOD DEFINITION -----------------------%</span></span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Convective numerical method (JST, LAX-FRIEDRICH, CUSP, ROE, AUSM, HLLC,</span></span><br><span class="line"><span class="comment">%                              TURKEL_PREC, MSW)</span></span><br><span class="line">CONV<span class="built_in">_</span>NUM<span class="built_in">_</span>METHOD<span class="built_in">_</span>FLOW= FDS</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Monotonic Upwind Scheme for Conservation Laws (TVD) in the flow equations.</span></span><br><span class="line"><span class="comment">%           Required for 2nd order upwind schemes (NO, YES)</span></span><br><span class="line">MUSCL<span class="built_in">_</span>FLOW= YES</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Slope limiter (NONE, VENKATAKRISHNAN, VENKATAKRISHNAN_WANG,</span></span><br><span class="line"><span class="comment">%                BARTH_JESPERSEN, VAN_ALBADA_EDGE)</span></span><br><span class="line">SLOPE<span class="built_in">_</span>LIMITER<span class="built_in">_</span>FLOW= NONE</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Coefficient for the Venkat&#x27;s limiter (upwind scheme). A larger values decrease</span></span><br><span class="line"><span class="comment">%             the extent of limiting, values approaching zero cause</span></span><br><span class="line"><span class="comment">%             lower-order approximation to the solution (0.05 by default)</span></span><br><span class="line">VENKAT<span class="built_in">_</span>LIMITER<span class="built_in">_</span>COEFF= 0.05</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Time discretization (RUNGE-KUTTA_EXPLICIT, EULER_IMPLICIT, EULER_EXPLICIT)</span></span><br><span class="line">TIME<span class="built_in">_</span>DISCRE<span class="built_in">_</span>FLOW= EULER<span class="built_in">_</span>IMPLICIT</span><br><span class="line"></span><br><span class="line"><span class="comment">% --------------------------- CONVERGENCE PARAMETERS --------------------------%</span></span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Convergence criteria (CAUCHY, RESIDUAL)</span></span><br><span class="line">CONV<span class="built_in">_</span>CRITERIA= RESIDUAL</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Min value of the residual (log10 of the residual)</span></span><br><span class="line">CONV<span class="built_in">_</span>RESIDUAL<span class="built_in">_</span>MINVAL= -14</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Start convergence criteria at iteration number</span></span><br><span class="line">CONV<span class="built_in">_</span>STARTITER= 10</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Number of elements to apply the criteria</span></span><br><span class="line">CONV<span class="built_in">_</span>CAUCHY<span class="built_in">_</span>ELEMS= 100</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Epsilon to control the series convergence</span></span><br><span class="line">CONV<span class="built_in">_</span>CAUCHY<span class="built_in">_</span>EPS= 1E-14</span><br><span class="line"></span><br><span class="line"><span class="comment">% ------------------------- INPUT/OUTPUT INFORMATION --------------------------%</span></span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Mesh input file</span></span><br><span class="line">MESH<span class="built_in">_</span>FILENAME= VMFL001<span class="built_in">_</span>rot<span class="built_in">_</span>conc<span class="built_in">_</span>cyl<span class="built_in">_</span>2D.cgns</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Mesh input file format (SU2, CGNS, NETCDF_ASCII)</span></span><br><span class="line">MESH<span class="built_in">_</span>FORMAT= CGNS</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Mesh output file</span></span><br><span class="line">MESH<span class="built_in">_</span>OUT<span class="built_in">_</span>FILENAME= mesh<span class="built_in">_</span>out.cgns</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Restart flow input file</span></span><br><span class="line">SOLUTION<span class="built_in">_</span>FILENAME= solution<span class="built_in">_</span>flow.dat</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Restart adjoint input file</span></span><br><span class="line">SOLUTION<span class="built_in">_</span>ADJ<span class="built_in">_</span>FILENAME= solution<span class="built_in">_</span>adj.dat</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Output file format (PARAVIEW, TECPLOT, STL)</span></span><br><span class="line">TABULAR<span class="built_in">_</span>FORMAT= CSV</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Output file convergence history (w/o extension) </span></span><br><span class="line">CONV<span class="built_in">_</span>FILENAME= history</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Output file restart flow</span></span><br><span class="line">RESTART<span class="built_in">_</span>FILENAME= restart<span class="built_in">_</span>flow.dat</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Output file restart adjoint</span></span><br><span class="line">RESTART<span class="built_in">_</span>ADJ<span class="built_in">_</span>FILENAME= restart<span class="built_in">_</span>adj.dat</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Output file flow (w/o extension) variables</span></span><br><span class="line">VOLUME<span class="built_in">_</span>FILENAME= flow</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Output file adjoint (w/o extension) variables</span></span><br><span class="line">VOLUME<span class="built_in">_</span>ADJ<span class="built_in">_</span>FILENAME= adjoint</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Output objective function gradient (using continuous adjoint)</span></span><br><span class="line">GRAD<span class="built_in">_</span>OBJFUNC<span class="built_in">_</span>FILENAME= of<span class="built_in">_</span>grad.dat</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Output file surface flow coefficient (w/o extension)</span></span><br><span class="line">SURFACE<span class="built_in">_</span>FILENAME= surface<span class="built_in">_</span>flow</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Output file surface adjoint coefficient (w/o extension)</span></span><br><span class="line">SURFACE<span class="built_in">_</span>ADJ<span class="built_in">_</span>FILENAME= surface<span class="built_in">_</span>adjoint</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Writing solution file frequency</span></span><br><span class="line">OUTPUT<span class="built_in">_</span>WRT<span class="built_in">_</span>FREQ= 250</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Writing convergence history frequency</span></span><br><span class="line">SCREEN<span class="built_in">_</span>WRT<span class="built_in">_</span>FREQ<span class="built_in">_</span>INNER= 1</span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% Screen output</span></span><br><span class="line">SCREEN<span class="built_in">_</span>OUTPUT= (INNER<span class="built_in">_</span>ITER, WALL<span class="built_in">_</span>TIME,  RMS<span class="built_in">_</span>PRESSURE, RMS<span class="built_in">_</span>VELOCITY-X, RMS<span class="built_in">_</span>VELOCITY-Y)</span><br></pre></td></tr></table></figure>

<p>确保vmfl001.cfg和网格文件VMFL001_rot_conc_cyl_2D.cgns在同一目录，执行以下命令（Windows下若用到tee命令，可以在Powershell里执行），运行求解并记录求解过程输出。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SU2_CFD vmfl001.cfg | <span class="built_in">tee</span> vmfl001.log</span><br></pre></td></tr></table></figure>

<h3 id="6-2-后处理"><a href="#6-2-后处理" class="headerlink" title="6.2 后处理"></a>6.2 后处理</h3><p>用ParaView打开求解输出的flow.vtu文件，处理过程同5.2。</p>
<p><img src="/../../images/20210814-6-1.png" alt="20210814-6-1.png"></p>
<p>层流方程与SU2计算结果误差对比。</p>
<table>
<thead>
<tr>
<th>半径 [mm]</th>
<th>切向速度（理论值） [m&#x2F;s]</th>
<th>切向速度（SU2仿真结果）[m&#x2F;s]</th>
<th>误差 [%]</th>
</tr>
</thead>
<tbody><tr>
<td>20</td>
<td>0.0151</td>
<td>0.0150846</td>
<td>0.10</td>
</tr>
<tr>
<td>25</td>
<td>0.0105</td>
<td>0.0105093</td>
<td>0.09</td>
</tr>
<tr>
<td>30</td>
<td>0.0072</td>
<td>0.00716493</td>
<td>0.49</td>
</tr>
<tr>
<td>35</td>
<td>0.0046</td>
<td>0.00453409</td>
<td>1.43</td>
</tr>
</tbody></table>
<h2 id="7-总结"><a href="#7-总结" class="headerlink" title="7. 总结"></a>7. 总结</h2><p>横向对比来看，CFX求解精度最高；其次是SU2；然后是Fluent；OpenFOAM精度和Fluent相差无几，但求解速度更快；STAR-CCM+精度最差。</p>
<table>
<thead>
<tr>
<th>半径 [mm]</th>
<th>Fluent求解误差 [%]</th>
<th>CFX求解误差 [%]</th>
<th>STAR-CCM+求解误差 [%]</th>
<th>OpenFOAM求解误差 [%]</th>
<th>SU2求解误差 [%]</th>
</tr>
</thead>
<tbody><tr>
<td>20</td>
<td>0.48</td>
<td>0.05</td>
<td>1.50</td>
<td>0.66</td>
<td>0.10</td>
</tr>
<tr>
<td>25</td>
<td>0.34</td>
<td>0.27</td>
<td>1.61</td>
<td>0.60</td>
<td>0.09</td>
</tr>
<tr>
<td>30</td>
<td>1.06</td>
<td>0.24</td>
<td>6.69</td>
<td>1.02</td>
<td>0.49</td>
</tr>
<tr>
<td>35</td>
<td>2.23</td>
<td>1.15</td>
<td>3.65</td>
<td>1.57</td>
<td>1.43</td>
</tr>
</tbody></table>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/03/26/%E7%9F%A5%E4%B9%8E%E6%97%A7%E6%96%87%E7%AB%A0/%E6%B1%82%E8%A7%A3%E5%99%A8%E9%AA%8C%E8%AF%81%E5%AF%B9%E6%AF%94%E2%80%94%E2%80%94%E6%97%8B%E8%BD%AC%E5%92%8C%E9%9D%99%E6%AD%A2%E5%90%8C%E5%BF%83%E5%9C%86%E6%9F%B1%E4%B9%8B%E9%97%B4%E7%9A%84%E5%B1%82%E6%B5%81/" data-id="cm8orhqqy0003q0098lqz537p" data-title="求解器验证对比——旋转和静止同心圆柱之间的层流" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-知乎旧文章/扒一扒十沣科技国产CFD软件——QFlux及QMesh" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/03/26/%E7%9F%A5%E4%B9%8E%E6%97%A7%E6%96%87%E7%AB%A0/%E6%89%92%E4%B8%80%E6%89%92%E5%8D%81%E6%B2%A3%E7%A7%91%E6%8A%80%E5%9B%BD%E4%BA%A7CFD%E8%BD%AF%E4%BB%B6%E2%80%94%E2%80%94QFlux%E5%8F%8AQMesh/" class="article-date">
  <time class="dt-published" datetime="2025-03-25T17:27:14.443Z" itemprop="datePublished">2025-03-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/03/26/%E7%9F%A5%E4%B9%8E%E6%97%A7%E6%96%87%E7%AB%A0/%E6%89%92%E4%B8%80%E6%89%92%E5%8D%81%E6%B2%A3%E7%A7%91%E6%8A%80%E5%9B%BD%E4%BA%A7CFD%E8%BD%AF%E4%BB%B6%E2%80%94%E2%80%94QFlux%E5%8F%8AQMesh/">扒一扒十沣科技国产CFD软件——QFlux及QMesh</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>08&#x2F;09&#x2F;2021</p>
<hr>
<p>[TOC]</p>
<hr>
<p>**先说结论：**1、十沣科技产品QFlux和QMesh与自身宣传不符。QMesh并不是什么“自主开发的先进计算流体力学核心软件”；而QFlux功能根本就尚未完善，至少没有包含其宣传所拥有的功能，而且笔者有理由怀疑其求解器根本就是“借鉴”自OpenFOAM。</p>
<h1 id="1-软件介绍及下载"><a href="#1-软件介绍及下载" class="headerlink" title="1. 软件介绍及下载"></a>1. 软件介绍及下载</h1><p>废话不多说，关于十沣科技的宣传可以从其官网（<a target="_blank" rel="noopener" href="http://www.tenfong.cn/%E3%80%81http://www.qfx-tech.com/%EF%BC%89%E4%B8%8A%E7%AA%A5%E7%9F%A5%E4%B8%80%E4%BA%8C%E3%80%82">http://www.tenfong.cn/、http://www.qfx-tech.com/）上窥知一二。</a></p>
<p><img src="/../../images/20210808-01-%E4%BC%81%E4%B8%9A%E6%A6%82%E5%86%B5.png" alt="20210808-01-企业概况.png"></p>
<p>该公司官网上的两个产品：QFlux和QMesh，前一个是CFD求解器、后一个是网格前处理器。感兴趣的同学可以在官网上注册然后登录下载。</p>
<p><img src="/../../images/20210808-02-QFlux.png" alt="20210808-02-QFlux.png"></p>
<p><img src="/../../images/20210808-03-QMesh.png" alt="20210808-03-QMesh.png"></p>
<p>不知是不是浏览器的问题，点击下载按钮后并不会弹出下载信息确认窗口，而是直接在浏览器后台下载，用户需要等到下载完成后到临时文件夹（Windows：C:\Users\[用户名]]\AppData\Local\Temp）里才能找到下载的程序安装文件。不仔细找找还真找不到，也不知道是官方是不是故意的呢。</p>
<p><img src="/../../images/20210808-04-%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6.png" alt="20210808-04-下载文件.png"></p>
<p>解压之后会得到<code>QFlux_x64.exe</code>及<code>QMesh_x64.exe</code>两个安装文件，分别安装之。安装过程没什么复杂的，这里就不细讲了。</p>
<h1 id="2-前处理软件QMesh"><a href="#2-前处理软件QMesh" class="headerlink" title="2. 前处理软件QMesh"></a>2. 前处理软件QMesh</h1><p>按照惯例，先扒一扒前处理软件QMesh。</p>
<p><img src="/../../images/20210808-05-QMesh%E7%A8%8B%E5%BA%8F%E6%96%87%E4%BB%B6.png" alt="20210808-05-QMesh程序文件.png"></p>
<p>可以看到QMesh网格显示方面是通过vtk库来实现的，界面则是通过Qt来实现。也不知道该公司有没有购买Qt的商业授权，要知道Qt的三种授权模式分别是GPL、LGPL和商业授权，笔者反正是没看到安装文件有声明引用Qt及其相关类库。</p>
<p><img src="/../../images/20210808-06-QMesh%E7%BD%91%E6%A0%BC%E7%94%9F%E6%88%90%E7%A8%8B%E5%BA%8F.png" alt="20210808-06-QMesh网格生成程序.png"></p>
<p>QMesh网格生成器的核心是<code>snappyHexMesh</code>，熟悉OpenFOAM的朋友应该都知道，这是OpenFOAM自带的网格生成器。</p>
<p><img src="/../../images/20210808-07-QMesh%E5%B8%AE%E5%8A%A9%E6%96%87%E4%BB%B6%E6%A6%82%E8%BF%B0.png" alt="20210808-07-QMesh帮助文件概述.png"></p>
<p>QMesh软件的帮助文件倒是很大方地承认了这一点。但是官网上宣传的不是“QMESH 是深圳十沣科技有限公司自主开发的先进计算流体力学核心软件”吗？核心的网格生成器引用别人的工具，这算哪门子的自主开发？合着就“自主”开发了一个GUI界面？然后还用了别人的类库？</p>
<p><img src="/../../images/20210808-08-QMesh%E8%BD%AF%E4%BB%B6%E7%95%8C%E9%9D%A2.png" alt="20210808-08-QMesh软件界面.png"></p>
<p>首次进入会提示试用期180天，软件界面中归中距。帮助文件关于里显示软件版本是2.1.3，版权方为“深圳清沣溪有限公司”。</p>
<p><img src="/../../images/20210808-09-elbow%E9%9D%A2%E7%BD%91%E6%A0%BC%E6%96%87%E4%BB%B6-stl%E6%A0%BC%E5%BC%8F.png" alt="20210808-09-elbow面网格文件-stl格式.png"></p>
<p>接下来用Fluent官方的算例elbow来试着进行建模及计算。上图是用ANSA导出的STL格式文件（ASCII格式），已经分好面。</p>
<p><img src="/../../images/20210808-10-QMesh%E5%AF%BC%E5%85%A5STL%E6%96%87%E4%BB%B6.png" alt="20210808-10-QMesh导入STL文件.png"></p>
<p>QMesh只支持导入STL格式曲面，但导入STL文件后无法识别已经分好的面，也无法对实体进行重新分区等操作。</p>
<p><img src="/../../images/20210808-11-QMesh%E8%AE%BE%E7%BD%AE%E7%BD%91%E6%A0%BC%E5%8C%BA%E5%9F%9F.png" alt="20210808-11-QMesh设置网格区域.png"></p>
<p>QMesh通过“区域”选项设置背景网格的区域，这点与OpenFOAM中的blockMesh类似，但不足的是不能调整背景网格的大小。需要指定材料点，也就是OpenFOAM中snappyHexMeshDict文件的<code>locationInMesh</code>关键字，熟悉OpenFOAM的同学应该都清楚。</p>
<p><img src="/../../images/20210808-12-QMesh%E8%AE%BE%E7%BD%AE%E7%BD%91%E6%A0%BC%E6%8E%A7%E5%88%B6%E5%8F%82%E6%95%B0.png" alt="20210808-12-QMesh设置网格控制参数.png"></p>
<p>QMesh通过“控制”选项设置贴体网格及边界层的控制参数，基本对应OpenFOAM中snappyHexMeshDict文件的<code>castellatedMeshControls</code>、<code>snapControls</code>及<code>addLayersControls</code>等所包含的内容。</p>
<p><img src="/../../images/20210808-13-QMesh%E5%89%96%E5%88%86%E7%BD%91%E6%A0%BC.png" alt="20210808-13-QMesh剖分网格.png"></p>
<p>点击“剖分网格”，在弹出会话框可以选择并行设置相关参数以及选择剖分体网格及边界层。</p>
<p><img src="/../../images/20210808-14-QMesh%E8%B0%83%E7%94%A8snappyHexMesh%E7%94%9F%E6%88%90%E7%BD%91%E6%A0%BC.png" alt="20210808-14-QMesh调用snappyHexMesh生成网格.png"></p>
<p>通过任务管理器可以看到，QMesh实际上是通过调用snappyHexMesh进行网格生成操作的。</p>
<p><img src="/../../images/20210808-15-QMesh%E7%94%9F%E6%88%90%E7%BD%91%E6%A0%BC.png" alt="20210808-15-QMesh生成网格.png"></p>
<p>由于是调用用snappyHexMesh进行网格生成操作的，因此不可避免地将snappyHexMesh的一些固有缺陷也带入其中。可以看到局部网格出现畸形，这其实是snappyHexMesh的缺陷所导致的，至今依然没有很好的解决办法。由于不能调整背景网格大小，因此当局部网格与背景网格相互重合时，有可能生成新的边界区域，就像上图中的<code>y-minus</code>区域一样。</p>
<p><img src="/../../images/20210808-16-QMesh%E5%AF%BC%E5%87%BA%E7%BD%91%E6%A0%BC.png" alt="20210808-16-QMesh导出网格.png"></p>
<p>将QMesh生成的网格导出elbow.msh（Fluent Mesh格式）及elbow.cgns（CGNS通用格式），QMesh工程文件保存格式为.qmh。可以看到elbow.cgns大小只有4kB，明显CGNS格式保存得不成功。唉~，软件能做成这样，估计都没经过测试就直接发出来了。</p>
<h1 id="3-CFD求解器QFlux"><a href="#3-CFD求解器QFlux" class="headerlink" title="3. CFD求解器QFlux"></a>3. CFD求解器QFlux</h1><p><img src="/../../images/20210808-17-QFlux%E7%A8%8B%E5%BA%8F%E6%96%87%E4%BB%B6.png" alt="20210808-17-QFlux程序文件.png"></p>
<p>QFlux的程序文件和QMesh类似，底层是通过Qt和vtk来实现得，笔者依然没有看到相关引用类库的声明。</p>
<p><img src="/../../images/20210808-18-QFlux%E6%A0%B8%E5%BF%83%E6%B1%82%E8%A7%A3%E5%99%A8%E6%96%87%E4%BB%B6.png" alt="20210808-18-QFlux核心求解器文件.png"></p>
<p>QFlux核心求解器文件是qcore，这个留到后面再讲。</p>
<p><img src="/../../images/20210808-19-QFlux%E8%BD%AF%E4%BB%B6%E7%95%8C%E9%9D%A2.png" alt="20210808-19-QFlux软件界面.png"></p>
<p>QFlux软件界面，版本号显示是2.7.152.0，版权方变成了“深圳十沣科技有限公司”。</p>
<p><img src="/../../images/20210809-20-QFlux%E5%AF%BC%E5%85%A5msh%E6%96%87%E4%BB%B6.png" alt="20210809-20-QFlux导入msh文件.png"></p>
<p>试着导入前面QMesh生成的elbow.msh，结果导入失败，识别不了。真是大水冲了龙王庙——一家人不认一家人(～￣▽￣)～。至于QMesh生成的elbow.cgns，很明显保存失败，不用费劲巴拉去试了。</p>
<p><img src="/../../images/20210809-21-QFlux%E5%AF%BC%E5%85%A5ANSA%E7%94%9F%E6%88%90%E7%9A%84cgns%E6%96%87%E4%BB%B6.png" alt="20210809-21-QFlux导入ANSA生成的cgns文件.png"></p>
<p>导入ANSA生成的cgns文件，已经分好边界。</p>
<p><img src="/../../images/20210809-22-QFlux%E5%AF%BC%E5%85%A5cgns%E7%BD%91%E6%A0%BC.png" alt="20210809-22-QFlux导入cgns网格.png"></p>
<p>QFlux导入CGNS网格之后依然没有识别出边界信息，边界条件里面只有一个边界，不能作边界分割的操作。（PS：依然是半成品呀~，这么草率就发出来吗？）</p>
<p>安装包提供了<code>OFoamToQFlux</code>程序用于转换OpenFOAM网格，好在笔者用OpenFOAM计算过相关案例。打开CMD命令行窗口，执行以下命令转换OpenFOAM网格。</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /d D:\opt\tenfong\QFlux #[QFlux安装路径]</span><br><span class="line"><span class="built_in">set</span> <span class="built_in">path</span>=<span class="variable">%cd%</span>;<span class="variable">%path%</span></span><br><span class="line"><span class="built_in">cd</span> /d F:\tenfong\solve #[OpenFOAM文件所在目录]</span><br><span class="line">OFoamToQFlux <span class="variable">%cd%</span>\[OpenFOAM文件的Case目录]\constant\polyMesh out.qfx</span><br></pre></td></tr></table></figure>

<p>这样即生成了QFlux的网格文件，并保存城QFlux格式(.qfx)。直接打开out.qfx文件即可。</p>
<p><img src="/../../images/20210809-23-QFlux%E6%89%93%E5%BC%80qfx%E6%96%87%E4%BB%B6.png" alt="20210809-23-QFlux打开qfx文件.png"></p>
<p><img src="/../../images/20210809-24-QFlux%E6%98%BE%E7%A4%BA%E8%BE%B9%E7%95%8C%E4%BF%A1%E6%81%AF.png" alt="20210809-24-QFlux显示边界信息.png"></p>
<p>可以看到这回显示了边界信息，边界条件后面再慢慢改。</p>
<p><img src="/../../images/20210809-25-%E6%A1%88%E4%BE%8B%E8%AF%B4%E6%98%8E.png" alt="20210809-25-案例说明.png"></p>
<p>计算案例取自Ansys Fluent的经典案例elbow，流体及边界参数设置如上图所示。</p>
<p><img src="/../../images/20210809-26-QFlux%E5%9F%BA%E6%9C%AC%E6%96%B9%E7%A8%8B%E4%BF%A1%E6%81%AF.png" alt="20210809-26-QFlux基本方程信息.png"></p>
<p>QFlux的基本方程，貌似只能选不可压缩流求解器Incompressible（喂喂喂，宣传中的可压缩流求解器呢？），激活能量方程。</p>
<p><img src="/../../images/20210809-27-QFlux%E7%89%A9%E7%90%86%E6%A8%A1%E5%9E%8B%E9%80%89%E6%8B%A9.png" alt="20210809-27-QFlux物理模型选择.png"></p>
<p>湍流模型，没什么需要特别说明的。右边的湍流参数也都是可以在OpenFOAM的turbulenceProperties文件里修改的。唯一的亮点可能是湍流模型的近壁处理方面，总比OpenFOAM里一个一个地在k文件、nut文件里调试壁面函数要好。（PS：仅仅是加了一个GUI而已，同样的功能我用Qt包装一下也能实现。）</p>
<p><img src="/../../images/20210809-28-QFlux%E7%A6%BB%E6%95%A3%E6%A0%BC%E5%BC%8F%E9%80%89%E6%8B%A9.png" alt="20210809-28-QFlux离散格式选择.png"></p>
<p>数值方法，就是求解器、离散格式和松弛因子的选择，基本相当于OpenFOAM的controlDict、fvSchemes和fvSolution文件，只不过不用你一个个去调试了而已。貌似求解器还只能选择SIMPLE算法。</p>
<p><img src="/../../images/20210809-29-QFlux%E6%9D%90%E6%96%99%E8%AE%BE%E7%BD%AE.png" alt="20210809-29-QFlux材料设置.png"></p>
<p>材料库里面只有空气、水和结构钢三种材料。</p>
<p><img src="/../../images/20210809-30-QFlux%E8%AE%BE%E7%BD%AE%E8%BE%B9%E7%95%8C%E6%9D%A1%E4%BB%B6.png" alt="20210809-30-QFlux设置边界条件.png"></p>
<p>进出口边界条件，流动方向不能指定为表面法向，只能手动输入流动方向坐标。不过它的湍流参数定义方式与其他商业CFD软件比较接近，总比OpenFOAM中一个个去计算然后手动定义k文件、epsilon文件还有nut文件方便地多。貌似速度和温度的单位不能更改，所以如果用户用的是℃单位的话，那么还要自己转换温标。</p>
<p><img src="/../../images/20210809-31-QFlux%E8%AE%BE%E7%BD%AE%E6%94%B6%E6%95%9B%E6%9D%A1%E4%BB%B6.png" alt="20210809-31-QFlux设置收敛条件.png"></p>
<p>设置收敛条件，动量方程、能量方程、连续性方程及湍流粘度方程收敛判断公差均设置为<code>1.0e-6</code>。</p>
<p><img src="/../../images/20210809-32-QFlux%E8%AE%BE%E7%BD%AE%E8%AE%A1%E7%AE%97%E6%9D%A1%E4%BB%B6.png" alt="20210809-32-QFlux设置计算条件.png"></p>
<p>设置计算条件，计算最大步数1000步，可以设置并行核数，可以看到QFlux的Windows版下MPI库用的是Microsoft MPI库，这点和OpenFOAM的Windows版出奇地一致。计算调用的是qcore.exe程序。</p>
<p><img src="/../../images/20210809-33-QFlux%E8%AE%A1%E7%AE%97%E6%94%B6%E6%95%9B%E6%9B%B2%E7%BA%BF.png" alt="20210809-33-QFlux计算收敛曲线.png"></p>
<p>可以看到计算385步左右收敛，但当鼠标停留在收敛曲线上时，标签数字只能显示到小数点后面四位数，而且还不能用科学记数法显示标签数字。</p>
<p><img src="/../../images/20210809-34-QFlux%E6%B8%A9%E5%BA%A6%E4%BA%91%E5%9B%BE%E6%98%BE%E7%A4%BA.png" alt="20210809-34-QFlux温度云图显示.png"></p>
<p>上图是QFlux计算结果输出的温度云图。</p>
<p><img src="/../../images/20210809-35-OpenFOAM%E8%AE%A1%E7%AE%97%E7%9A%84%E6%B8%A9%E5%BA%A6%E4%BA%91%E5%9B%BE.png" alt="20210809-35-OpenFOAM计算的温度云图.png"></p>
<p>上图是相同案例OpenFOAM计算结果输出的温度云图，相同的案例可以通过<code>simpleFoam</code>+<code>scalarTransportFoam</code>或者<code>buoyantSimpleFoam</code>实现。可以看到两者计算结果较为相似。</p>
<h1 id="4-QFlux求解器与OpenFOAM的对比"><a href="#4-QFlux求解器与OpenFOAM的对比" class="headerlink" title="4. QFlux求解器与OpenFOAM的对比"></a>4. QFlux求解器与OpenFOAM的对比</h1><p><img src="/../../images/20210809-36-QFlux%E4%B8%8EOpenFOAM%E6%96%87%E4%BB%B6%E5%AF%B9%E6%AF%94.png" alt="20210809-36-QFlux与OpenFOAM文件对比.png"></p>
<p>对比QFlux与OpenFOAM(v2012)的动态链接库文件，不难发现，两者在主要文件结构和命名方式上有不少相似之处。</p>
<p><img src="/../../images/20210809-37-QFlux%E4%B8%8EOpenFOAM%E7%9A%84dll%E5%AF%B9%E6%AF%94.png" alt="20210809-37-QFlux与OpenFOAM的dll对比.png"></p>
<p>用”Dependency Walker”查看两者引用动态链接库文件的函数命名，可以发现在一些关键的链接库中，内部函数命名方式不敢说一模一样，只能说高度相似。</p>
<p>由于OpenFOAM是开源软件，源代码网上都可以下载得到，很难说QFlux没有“借鉴”OpenFOAM源代码。至于“借鉴”了多少内容，则又很难说得清了。</p>
<p>鉴于国内CFD等工业软件无比孱弱的现状，相比于自主开发，在开源平台上快速包装出易用的软件平台似乎更容易受到软件开发者和投资者的欢迎。对比OpenFOAM和QFlux两者功能实现、开发程度以及代码量的不同，OpenFOAM程序大小、代码量还有成熟度是要远远高于QFlux的。其实在OpenFOAM平台上开发相关界面、引入流程控制一直是业界研究的重点，国内外有不少公司都是围绕着OpenFOAM进行相关应用及二次开发。但是一边“借鉴”开源程序，一边宣称完全”自主开发“的，可能除了国内的互联网公司外都做不出来了，当然这其中”十沣科技“算是一个。</p>
<p>其实对于OpenFOAM等开源平台来说，交流和创新是最重要的，新方法的实现远比工业化的包装以及简单易用重要的多，这也是OpenFOAM这么多年来坚持文本和命令行参数控制的原因之一。比”借鉴“本身更可怕的是麻木和惰性，当我们用惯了开源平台，只知道一味索取而不知道反哺，只知道重构别人家的代码而不知道从底层进行构建和完善，知其然而不知其所以然……当有一天失去了开源平台之后，我们还有没有办法坚持所谓的”自主开发“呢？</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/03/26/%E7%9F%A5%E4%B9%8E%E6%97%A7%E6%96%87%E7%AB%A0/%E6%89%92%E4%B8%80%E6%89%92%E5%8D%81%E6%B2%A3%E7%A7%91%E6%8A%80%E5%9B%BD%E4%BA%A7CFD%E8%BD%AF%E4%BB%B6%E2%80%94%E2%80%94QFlux%E5%8F%8AQMesh/" data-id="cm8orhqqr0000q009hzcu5tyx" data-title="扒一扒十沣科技国产CFD软件——QFlux及QMesh" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-知乎旧文章/ArchLinux下OpenFOAM编译安装与PBS并行化" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/03/26/%E7%9F%A5%E4%B9%8E%E6%97%A7%E6%96%87%E7%AB%A0/ArchLinux%E4%B8%8BOpenFOAM%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85%E4%B8%8EPBS%E5%B9%B6%E8%A1%8C%E5%8C%96/" class="article-date">
  <time class="dt-published" datetime="2025-03-25T17:19:25.920Z" itemprop="datePublished">2025-03-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/03/26/%E7%9F%A5%E4%B9%8E%E6%97%A7%E6%96%87%E7%AB%A0/ArchLinux%E4%B8%8BOpenFOAM%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85%E4%B8%8EPBS%E5%B9%B6%E8%A1%8C%E5%8C%96/">ArchLinux下OpenFOAM编译安装与PBS并行化</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>12&#x2F;08&#x2F;2021</p>
<hr>
<p>[TOC]</p>
<hr>
<h2 id="1-源代码下载"><a href="#1-源代码下载" class="headerlink" title="1. 源代码下载"></a>1. 源代码下载</h2><h3 id="1-1-下载OpenFOAM源代码"><a href="#1-1-下载OpenFOAM源代码" class="headerlink" title="1.1 下载OpenFOAM源代码"></a>1.1 下载OpenFOAM源代码</h3><p>在<code>$&#123;HOME&#125;</code>目录下新建OpenFOAM目录：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> <span class="variable">$&#123;HOME&#125;</span></span><br><span class="line"><span class="built_in">mkdir</span> OpenFOAM &amp;&amp; <span class="built_in">cd</span> OpenFOAM</span><br></pre></td></tr></table></figure>

<p>从github下载OpenFOAM和ThirdParty的源代码，放到<code>$&#123;HOME&#125;/OpenFOAM</code>目录中：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/OpenFOAM/OpenFOAM-dev --depth=1</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/OpenFOAM/ThirdParty-dev --depth=1</span><br></pre></td></tr></table></figure>

<h3 id="1-2-下载Torque-PBS-源码包"><a href="#1-2-下载Torque-PBS-源码包" class="headerlink" title="1.2 下载Torque(PBS)源码包"></a>1.2 下载Torque(PBS)源码包</h3><p>本文用的是AUR中的Torque，CentOS、Debian和SUSE系的操作系统可以从Github上的OpenPBS下载现成的二进制包。采用OpenPBS或PBS Pro请跳过本文第3节，参照其他文档进行PBS配置。</p>
<p>从AUR上下载Torque(PBS)源文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://aur.archlinux.org/torque.git</span><br><span class="line"><span class="built_in">cd</span> torque</span><br><span class="line">wget http://wpfilebase.s3.amazonaws.com/torque/torque-6.1.1.1.tar.gz</span><br></pre></td></tr></table></figure>

<h2 id="2-编译安装OpenFOAM"><a href="#2-编译安装OpenFOAM" class="headerlink" title="2. 编译安装OpenFOAM"></a>2. 编译安装OpenFOAM</h2><h3 id="2-1-设置环境变量"><a href="#2-1-设置环境变量" class="headerlink" title="2.1 设置环境变量"></a>2.1 设置环境变量</h3><p>编辑<code>$&#123;HOME&#125;/.bashrc</code>文件，添加以下两行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#OpenFOAM</span></span><br><span class="line"><span class="built_in">source</span> <span class="variable">$&#123;HOME&#125;</span>/OpenFOAM/OpenFOAM-dev/etc/bashrc WM_MPLIB=OPENMPI</span><br></pre></td></tr></table></figure>

<p>末尾的<code>WM_MPLIB=OPENMPI</code>表示使用重新编译的OpenMPI库。</p>
<p>更新环境变量：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> <span class="variable">$&#123;HOME&#125;</span>/.bashrc</span><br></pre></td></tr></table></figure>

<p>验证环境变量是否正确：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$WM_PROJECT_DIR</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$WM_THIRD_PARTY_DIR</span></span><br></pre></td></tr></table></figure>

<p>可以正确输出OpenFOAM编译目录，则表示环境变量设置正确。</p>
<h3 id="2-2-编译第三方库"><a href="#2-2-编译第三方库" class="headerlink" title="2.2 编译第三方库"></a>2.2 编译第三方库</h3><p>进入<code>ThirdParty-dev</code>目录，编译第三方库：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> <span class="variable">$WM_THIRD_PARTY_DIR</span></span><br><span class="line">wget https://download.open-mpi.org/release/open-mpi/v2.1/openmpi-2.1.1.tar.gz</span><br><span class="line">tar -xvzf openmpi-2.1.1.tar.gz</span><br><span class="line">./Allwmake</span><br></pre></td></tr></table></figure>

<p>由于前面指定了<code>WM_MPLIB=OPENMPI</code>，此处需要手动下载OpenMPI源码文件，使用<code>wget</code>下载OpenMPI源码包并解压。<code>Allwmake</code>后面可以增加<code>-jN</code>选项开启多核并行编译，这里的<code>N</code>应替换成并行数，<code>Allwmake</code>会自动编译OpenMPI。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> mpirun</span><br><span class="line">&gt;<span class="variable">$&#123;WM_THIRD_PARTY_DIR&#125;</span>/platforms/linux64Gcc/openmpi-2.1.1/bin/mpirun</span><br><span class="line"><span class="built_in">which</span> mpicc</span><br><span class="line">&gt;<span class="variable">$&#123;WM_THIRD_PARTY_DIR&#125;</span>/platforms/linux64Gcc/openmpi-2.1.1/bin/mpicc</span><br></pre></td></tr></table></figure>

<h3 id="2-3-编译ParaView"><a href="#2-3-编译ParaView" class="headerlink" title="2.3 编译ParaView"></a>2.3 编译ParaView</h3><p>继续在<code>ThirdParty-dev</code>目录里编译ParaView：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> <span class="variable">$WM_THIRD_PARTY_DIR</span></span><br><span class="line">./makeParaView -mpi</span><br><span class="line">wmRefresh</span><br></pre></td></tr></table></figure>

<p>编译完成后运行<code>wmRefresh</code>刷新环境变量。</p>
<h3 id="2-4-编译OpenFOAM"><a href="#2-4-编译OpenFOAM" class="headerlink" title="2.4 编译OpenFOAM"></a>2.4 编译OpenFOAM</h3><p>切换到<code>OpenFOAM-dev</code>目录编译OpenFOAM：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> <span class="variable">$WM_PROJECT_DIR</span></span><br><span class="line">./Allwmake -jN</span><br></pre></td></tr></table></figure>

<p>OpenFOAM编译时间较长，建议开启多核心并行编译，这里的<code>N</code>应替换成核心数。</p>
<h3 id="2-5-测试"><a href="#2-5-测试" class="headerlink" title="2.5 测试"></a>2.5 测试</h3><p>执行以下命令从OpenFOAM自带的实例文件中拷贝cavity文件夹到当前路径下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> <span class="variable">$FOAM_RUN</span> &amp;&amp; <span class="built_in">cd</span> <span class="variable">$FOAM_RUN</span></span><br><span class="line"><span class="built_in">cp</span> -r <span class="variable">$FOAM_TUTORIALS</span>/incompressible/simpleFoam/pitzDaily .</span><br><span class="line"><span class="built_in">cd</span> pitzDaily</span><br></pre></td></tr></table></figure>

<p>生成网格：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blockMesh</span><br></pre></td></tr></table></figure>

<p>执行计算：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">simpleFoam | <span class="built_in">tee</span> simpleFoam.<span class="built_in">log</span></span><br></pre></td></tr></table></figure>

<p>启动ParaView进行后处理：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">paraFoam</span><br></pre></td></tr></table></figure>

<h3 id="2-6-更新"><a href="#2-6-更新" class="headerlink" title="2.6 更新"></a>2.6 更新</h3><p>使用<code>git</code>命令更新<code>OpenFOAM-dev</code>及<code>ThirdParty-dev</code>目录中的源代码文件，然后重新编译安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git pull</span><br><span class="line">wcleanPlatform</span><br><span class="line">./Allwmake -jN</span><br></pre></td></tr></table></figure>

<h2 id="3-编译安装Torque-PBS"><a href="#3-编译安装Torque-PBS" class="headerlink" title="3. 编译安装Torque(PBS)"></a>3. 编译安装Torque(PBS)</h2><h3 id="3-1-安装Torque"><a href="#3-1-安装Torque" class="headerlink" title="3.1 安装Torque"></a>3.1 安装Torque</h3><p>进入<code>torque</code>目录：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> <span class="variable">$&#123;HOME&#125;</span>/OpenFOAM/torque</span><br></pre></td></tr></table></figure>

<p>编译Torque：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">makepkg</span><br></pre></td></tr></table></figure>

<p>安装Torque：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -U torque-6.1.1.1-2-x86_64.pkg.tar.zst</span><br></pre></td></tr></table></figure>

<p>启动服务（<code>pbs_mom.service</code>和<code>pbs_sched.service</code>在源代码的<code>src/torque-6.1.1.1/contrib/systemd</code>目录中，需要手动复制过来）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> pbs_server</span><br><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> trqauthd</span><br><span class="line"><span class="built_in">sudo</span> systemctl start pbs_server</span><br><span class="line"><span class="built_in">sudo</span> systemctl start trqauthd</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> pbs_mom.service /usr/lib/systemd/system</span><br><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> pbs_mom</span><br><span class="line"><span class="built_in">sudo</span> systemctl start pbs_mom</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> pbs_sched.service /usr/lib/systemd/system</span><br><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> pbs_sched</span><br><span class="line"><span class="built_in">sudo</span> systemctl start pbs_sched</span><br></pre></td></tr></table></figure>

<h3 id="3-2-服务器配置"><a href="#3-2-服务器配置" class="headerlink" title="3.2 服务器配置"></a>3.2 服务器配置</h3><p>参考<a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/TORQUE">archlinux wiki</a>，完成Torque配置。</p>
<p>编辑<code>/etc/hosts</code>文件（示例），添加服务器节点和计算节点IP地址：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">192.168.100.101    master</span><br><span class="line"><span class="comment">#192.168.100.102    cluster01</span></span><br><span class="line"><span class="comment">#192.168.100.103    cluster02</span></span><br></pre></td></tr></table></figure>

<p>更改<code>/var/spool/torque/server_name</code>文件中的主机名为服务器节点主机名：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">master</span><br></pre></td></tr></table></figure>

<p>执行以下命令，选择Y新建服务器端配置文件（只运行一次，提示会覆盖现有配置文件）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pbs_server -t create</span><br></pre></td></tr></table></figure>

<p>执行以下命令，运行服务器端守护进程：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> trqauthd</span><br></pre></td></tr></table></figure>

<p>初始化默认设置：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> qmgr -c <span class="string">&quot;set server acl_hosts = master&quot;</span></span><br><span class="line"><span class="built_in">sudo</span> qmgr -c <span class="string">&quot;set server scheduling=true&quot;</span></span><br><span class="line"><span class="built_in">sudo</span> qmgr -c <span class="string">&quot;create queue batch queue_type=execution&quot;</span></span><br><span class="line"><span class="built_in">sudo</span> qmgr -c <span class="string">&quot;set queue batch started=true&quot;</span></span><br><span class="line"><span class="built_in">sudo</span> qmgr -c <span class="string">&quot;set queue batch enabled=true&quot;</span></span><br><span class="line"><span class="built_in">sudo</span> qmgr -c <span class="string">&quot;set queue batch resources_default.nodes=1&quot;</span></span><br><span class="line"><span class="built_in">sudo</span> qmgr -c <span class="string">&quot;set queue batch resources_default.walltime=3600&quot;</span></span><br><span class="line"><span class="built_in">sudo</span> qmgr -c <span class="string">&quot;set server default_queue=batch&quot;</span></span><br><span class="line"><span class="built_in">sudo</span> qmgr -c <span class="string">&quot;set server keep_completed = 60&quot;</span></span><br></pre></td></tr></table></figure>

<p>验证设置：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qmgr -c <span class="string">&#x27;p s&#x27;</span></span><br></pre></td></tr></table></figure>

<p>编辑<code>/var/spool/torque/server_priv/nodes</code>文件，添加计算节点（服务器也可以是计算节点）。格式为<code>HOSTNAME np=x gpus=y</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">master np=8 gpus=1</span><br></pre></td></tr></table></figure>

<h3 id="3-3-计算节点设置"><a href="#3-3-计算节点设置" class="headerlink" title="3.3 计算节点设置"></a>3.3 计算节点设置</h3><p>编辑<code>/var/spool/torque/mom_priv/config</code>文件，添加以下信息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pbsserver    master    <span class="comment"># 服务器主机名，与nodes一致</span></span><br><span class="line">logevent    255    <span class="comment"># 日志记录事件数</span></span><br></pre></td></tr></table></figure>

<p>生成并注册密钥文件，确保主机间ssh访问通畅：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> <span class="variable">$HOME</span>/.ssh</span><br><span class="line">ssh-keygen -t rsa</span><br><span class="line"><span class="built_in">cp</span> id_rsa.pub authorized_keys</span><br></pre></td></tr></table></figure>

<h3 id="3-4-重启服务端进程"><a href="#3-4-重启服务端进程" class="headerlink" title="3.4 重启服务端进程"></a>3.4 重启服务端进程</h3><p>在服务器端执行以下命令，重启服务端进程。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> killall -s 9 pbs_server</span><br><span class="line"><span class="built_in">sudo</span> pbs_server</span><br></pre></td></tr></table></figure>

<h3 id="3-5-启动计算节点进程"><a href="#3-5-启动计算节点进程" class="headerlink" title="3.5 启动计算节点进程"></a>3.5 启动计算节点进程</h3><p>执行以下命令，启动计算节点进程</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pbs_mom</span><br></pre></td></tr></table></figure>

<p>执行以下命令，显示计算节点状态：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pbsnodes -a</span><br></pre></td></tr></table></figure>

<p>输出以下信息（示例），表示配置成功：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">master</span><br><span class="line">     state = free</span><br><span class="line">     power_state = Running</span><br><span class="line">     np = 4</span><br><span class="line">     ntype = cluster</span><br><span class="line">     mom_service_port = 15002</span><br><span class="line">     mom_manager_port = 15003</span><br><span class="line">     gpus = 1</span><br></pre></td></tr></table></figure>

<p>若节点state显示为down，表示该节点不可用。可以用以下命令强制使节点释放：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> qmgr -a -c <span class="string">&#x27;set node master state=free&#x27;</span></span><br></pre></td></tr></table></figure>

<p>我们可以编写systemd服务脚本，自动释放节点。脚本内容如下，另存为<code>/usr/lib/systemd/system/pbs_autofree.service</code>文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Auto free pbs_server</span><br><span class="line">Requires=network.target</span><br><span class="line">After=network.target trqauthd.service pbs_server.service pbs_mom.service</span><br><span class="line">StartLimitIntervalSec=0</span><br><span class="line"> </span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">Restart=always</span><br><span class="line">RestartSec=30</span><br><span class="line">User=root</span><br><span class="line">ExecStart=qmgr -a -c <span class="string">&#x27;set node master state=free&#x27;</span></span><br><span class="line"> </span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<p>启动服务：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> pbs_autofree</span><br><span class="line"><span class="built_in">sudo</span> systemctl start pbs_autofree</span><br></pre></td></tr></table></figure>

<p>关闭服务以节省资源：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">disable</span> pbs_autofree</span><br><span class="line"><span class="built_in">sudo</span> systemctl stop pbs_autofree</span><br></pre></td></tr></table></figure>

<h2 id="4-OpenFOAM并行化提交作业"><a href="#4-OpenFOAM并行化提交作业" class="headerlink" title="4. OpenFOAM并行化提交作业"></a>4. OpenFOAM并行化提交作业</h2><h3 id="4-1-准备算例"><a href="#4-1-准备算例" class="headerlink" title="4.1 准备算例"></a>4.1 准备算例</h3><p>执行以下命令从OpenFOAM自带的实例文件中拷贝cavity文件夹到当前路径下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> <span class="variable">$FOAM_RUN</span></span><br><span class="line"><span class="built_in">mkdir</span> cluster &amp;&amp; <span class="built_in">cd</span> cluster</span><br><span class="line"><span class="built_in">cp</span> -r <span class="variable">$FOAM_TUTORIALS</span>/incompressible/simpleFoam/pitzDaily .</span><br><span class="line"><span class="built_in">cd</span> pitzDaily</span><br></pre></td></tr></table></figure>

<p>在<code>system</code>目录下新建<code>decomposeParDict</code>文件，用于网格分区，为并行化作准备。文件内容如下，网格分区数为2：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">FoamFile</span><br><span class="line">&#123;</span><br><span class="line">    version     2.0;</span><br><span class="line">    format      ascii;</span><br><span class="line">    class       dictionary;</span><br><span class="line">    note        <span class="string">&quot;mesh decomposition control dictionary&quot;</span>;</span><br><span class="line">    object      decomposeParDict;</span><br><span class="line">&#125;</span><br><span class="line">numberOfSubdomains  2;</span><br><span class="line">method          scotch;</span><br></pre></td></tr></table></figure>

<h3 id="4-2-提交作业"><a href="#4-2-提交作业" class="headerlink" title="4.2 提交作业"></a>4.2 提交作业</h3><p>新建脚本文件，命名为<code>pitzDaily.pbs</code>，用于提交并行作业。文件内容如下，使用1个节点、每节点2个CPU核心进行计算（<code>nodes=1:ppn=2</code>），线程数2（<code>mpirun -np 2</code>），这些与<code>decomposeParDict</code>文件中网格分区数目要保持一致：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#PBS -l nodes=1:ppn=2</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#PBS -N pitzDaily</span></span><br><span class="line"><span class="comment">#PBS -A OpenFOAM</span></span><br><span class="line"><span class="comment">#PBS -o pitzDaily.out</span></span><br><span class="line"><span class="comment">#PBS -e pitzDaily.err</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="built_in">source</span> <span class="variable">$&#123;HOME&#125;</span>/OpenFOAM/OpenFOAM-dev/etc/bashrc WM_MPLIB=OPENMPI</span><br><span class="line"><span class="built_in">export</span> RUN_DIR=<span class="variable">$&#123;FOAM_RUN&#125;</span>/cluster/pitzDaily</span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$&#123;RUN_DIR&#125;</span></span><br><span class="line">blockMesh</span><br><span class="line">decomposePar</span><br><span class="line">mpirun -np 2 simpleFoam -parallel | <span class="built_in">tee</span> simpleFoam.<span class="built_in">log</span></span><br><span class="line">reconstructPar</span><br><span class="line">tar -Jcvf pitzDaily_results.tar.xz *</span><br></pre></td></tr></table></figure>

<p>使用qsub提交作业：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 755 pitzDaily.pbs</span><br><span class="line">qsub pitzDaily.pbs</span><br></pre></td></tr></table></figure>

<p>使用qstat检查作业状态：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qstat -a</span><br></pre></td></tr></table></figure>

<p>计算结束后，下载<code>pitzDaily_results.tar.xz</code>文件并解压缩，启动ParaView进行后处理：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">paraFoam</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/03/26/%E7%9F%A5%E4%B9%8E%E6%97%A7%E6%96%87%E7%AB%A0/ArchLinux%E4%B8%8BOpenFOAM%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85%E4%B8%8EPBS%E5%B9%B6%E8%A1%8C%E5%8C%96/" data-id="cm8orhqqw0001q0099q2kefmk" data-title="ArchLinux下OpenFOAM编译安装与PBS并行化" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/03/">三月 2025</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/03/26/Linux/Ubuntu24.04%E5%AE%89%E8%A3%85Ansys2025R1/">Ubuntu24.04安装Ansys2025R1</a>
          </li>
        
          <li>
            <a href="/2025/03/26/Linux/Ubuntu24.04%E6%90%AD%E5%BB%BASamba%E6%9C%8D%E5%8A%A1%E5%99%A8/">Ubuntu24.04搭建Samba服务器</a>
          </li>
        
          <li>
            <a href="/2025/03/26/Linux/Ubuntu%E5%AE%89%E8%A3%85SIMULIA2024/">Ubuntu安装SIMULIA2024</a>
          </li>
        
          <li>
            <a href="/2025/03/26/Linux/Hyper-V%E8%99%9A%E6%8B%9F%E4%BA%A4%E6%8D%A2%E6%9C%BANAT%E8%AE%BE%E7%BD%AE%E9%9D%99%E6%80%81IP/">Hyper-V虚拟交换机NAT设置静态IP</a>
          </li>
        
          <li>
            <a href="/2025/03/26/Linux/Ubuntu%E5%AE%89%E8%A3%85Slurm/">Ubuntu安装Slurm</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 Andrew Moa<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>